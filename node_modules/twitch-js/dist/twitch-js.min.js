(function(e,t){'object'==typeof exports&&'object'==typeof module?module.exports=t():'function'==typeof define&&define.amd?define('TwitchJs',[],t):'object'==typeof exports?exports.TwitchJs=t():e.TwitchJs=t()})('undefined'==typeof self?this:self,function(){var e=Math.max,t=Math.floor,n=Math.pow,r=String.fromCharCode,o=Math.min;return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(n,'a',n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=71)}([function(e){e.exports='function'==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e){function t(){throw new Error('setTimeout has not been defined')}function n(){throw new Error('clearTimeout has not been defined')}function r(e){if(p===setTimeout)return setTimeout(e,0);if((p===t||!p)&&setTimeout)return p=setTimeout,setTimeout(e,0);try{return p(e,0)}catch(t){try{return p.call(null,e,0)}catch(t){return p.call(this,e,0)}}}function a(e){if(u===clearTimeout)return clearTimeout(e);if((u===n||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}function o(){f&&h&&(f=!1,h.length?c=h.concat(c):g=-1,c.length&&s())}function s(){if(!f){var e=r(o);f=!0;for(var t=c.length;t;){for(h=c,c=[];++g<t;)h&&h[g].run();g=-1,t=c.length}h=null,f=!1,a(e)}}function d(e,t){this.fun=e,this.array=t}function i(){}var l=e.exports={},p,u;(function(){try{p='function'==typeof setTimeout?setTimeout:t}catch(n){p=t}try{u='function'==typeof clearTimeout?clearTimeout:n}catch(t){u=n}})();var c=[],f=!1,g=-1,h;l.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new d(e,t)),1!==c.length||f||r(s)},d.prototype.run=function(){this.fun.apply(null,this.array)},l.title='browser',l.browser=!0,l.env={},l.argv=[],l.version='',l.versions={},l.on=i,l.addListener=i,l.once=i,l.off=i,l.removeListener=i,l.removeAllListeners=i,l.emit=i,l.prependListener=i,l.prependOnceListener=i,l.listeners=function(){return[]},l.binding=function(){throw new Error('process.binding is not supported')},l.cwd=function(){return'/'},l.chdir=function(){throw new Error('process.chdir is not supported')},l.umask=function(){return 0}},function(e){var t=function(){return this}();try{t=t||Function('return this')()||(1,eval)('this')}catch(n){'object'==typeof window&&(t=window)}e.exports=t},function(e,t,n){(function(e){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):'[object Array]'===n(e)},t.isBoolean=function(e){return'boolean'==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return'number'==typeof e},t.isString=function(e){return'string'==typeof e},t.isSymbol=function(e){return'symbol'==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return'[object RegExp]'===n(e)},t.isObject=function(e){return'object'==typeof e&&null!==e},t.isDate=function(e){return'[object Date]'===n(e)},t.isError=function(t){return'[object Error]'===n(t)||t instanceof Error},t.isFunction=function(e){return'function'==typeof e},t.isPrimitive=function(e){return null===e||'boolean'==typeof e||'number'==typeof e||'string'==typeof e||'symbol'==typeof e||'undefined'==typeof e},t.isBuffer=e.isBuffer}).call(t,n(12).Buffer)},function(e){e.exports=function(e){return e}},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var n=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++)for(var r in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e};const r=t.CHAT_SERVER='irc-ws.chat.twitch.tv',a=t.CHAT_SERVER_PORT=6667,o=t.CHAT_SERVER_SSL_PORT=443,s=t.CONNECTION_TIMEOUT=5e3,i=t.JOIN_TIMEOUT=1e3,d=t.COMMAND_TIMEOUT=1e3,l=t.CLIENT_PRIORITY=100,p=t.RATE_LIMIT_USER=40,u=t.RATE_LIMIT_MODERATOR=200,c=t.RATE_LIMIT_KNOWN_BOT=100,f=t.RATE_LIMIT_VERIFIED_BOT=15e3,g=t.QUEUE_TICK_RATE=1e3,h=t.ERROR_CONNECT_TIMED_OUT='ERROR: connect timed out',_=t.ERROR_CONNECTION_IN_PROGRESS='ERROR: connection in progress',m=t.ERROR_JOIN_TIMED_OUT='ERROR: join timed out',y=t.ERROR_SAY_TIMED_OUT='ERROR: say timed out',b=t.ERROR_COMMAND_TIMED_OUT='ERROR: command timed out',E=t.ERROR_COMMAND_UNRECOGNIZED='ERROR: command unrecognized',S=t.ERROR_PART_TIMED_OUT='ERROR: part timed out',T=t.MEMBERSHIP_COMMANDS={JOIN:'JOIN',MODE:'MODE',PART:'PART',NAMES:'353',NAMES_END:'366'},O=t.TAG_COMMANDS={CLEAR_CHAT:'CLEARCHAT',GLOBAL_USER_STATE:'GLOBALUSERSTATE',PRIVATE_MESSAGE:'PRIVMSG',ROOM_STATE:'ROOMSTATE',USER_NOTICE:'USERNOTICE',USER_STATE:'USERSTATE'},x=t.OTHER_COMMANDS={PING:'PING',PONG:'PONG'},R=t.COMMANDS=n({},x,T,O,{CLEAR_CHAT:'CLEARCHAT',HOST_TARGET:'HOSTTARGET',NOTICE:'NOTICE',RECONNECT:'RECONNECT',ROOM_STATE:'ROOMSTATE',USER_NOTICE:'USERNOTICE',USER_STATE:'USERSTATE'}),k=t.NOTICE_MESSAGE_IDS={ALREADY_BANNED:'already_banned',ALREADY_EMOTE_ONLY_OFF:'already_emote_only_off',ALREADY_EMOTE_ONLY_ON:'already_emote_only_on',ALREADY_R9K_OFF:'already_r9k_off',ALREADY_R9K_ON:'already_r9k_on',ALREADY_SUBS_OFF:'already_subs_off',ALREADY_SUBS_ON:'already_subs_on',BAD_HOST_HOSTING:'bad_host_hosting',BAN_SUCCESS:'ban_success',BAD_UNBAN_NO_BAN:'bad_unban_no_ban',EMOTE_ONLY_OFF:'emote_only_off',EMOTE_ONLY_ON:'emote_only_on',HOST_OFF:'host_off',HOST_ON:'host_on',HOSTS_REMAINING:'hosts_remaining',MSG_CHANNEL_SUSPENDED:'msg_channel_suspended',R9K_OFF:'r9k_off',R9K_ON:'r9k_on',ROOM_MODS:'room_mods',SLOW_OFF:'slow_off',SLOW_ON:'slow_on',SUBS_OFF:'subs_off',SUBS_ON:'subs_on',TIMEOUT_SUCCESS:'timeout_success',UNBAN_SUCCESS:'unban_success',UNRECOGNIZED_COMMAND:'unrecognized_cmd'},w=t.USER_NOTICE_MESSAGE_IDS={RAID:'raid',RESUBSCRIPTION:'resub',RITUAL:'ritual',SUBSCRIPTION_GIFT:'subgift',SUBSCRIPTION:'sub'},M=t.MESSAGE_IDS=n({},k,w),A=t.EVENTS=n({},R,{RAW:'RAW',ALL:'*',CONNECTED:'CONNECTED',DISCONNECTED:'DISCONNECTED',ERROR_ENCOUNTERED:'ERROR_ENCOUNTERED',PARSE_ERROR_ENCOUNTERED:'PARSE_ERROR_ENCOUNTERED',RAID:'RAID',RESUBSCRIPTION:'RESUBSCRIPTION',RITUAL:'RITUAL',SUBSCRIPTION_GIFT:'SUBSCRIPTION_GIFT',SUBSCRIPTION:'SUBSCRIPTION',ROOM_MODS:'ROOM_MODS',MOD_GAINED:'MOD_GAINED',MOD_LOST:'MOD_LOST',USER_BANNED:'USER_BANNED',CHANNEL_HOSTED:'CHANNEL_HOSTED',CHANNEL_HOSTED_STOPPED:'CHANNEL_HOSTED_STOPPED'}),N=t.CHAT_COMMANDS={ME:'me',BAN:'ban',CLEAR:'clear',COLOR:'color',COMMERCIAL:'commercial',EMOTE_ONLY:'emoteonly',EMOTE_ONLY_OFF:'emoteonlyoff',FOLLOWERS_ONLY:'followersonly',FOLLOWERS_ONLY_OFF:'followersonlyoff',HOST:'host',MOD:'mod',MODS:'mods',R9K:'r9k',R9K_OFF:'r9koff',SLOW:'slow',SLOW_OFF:'slowoff',SUBSCRIBERS:'subscribers',SUBSCRIBERS_OFF:'subscribersoff',TIMEOUT:'timeout',UNBAN:'unban',UNHOST:'unhost',UNMOD:'unmod',WHISPER:'whisper'}},function(e){function t(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return'function'==typeof e}function r(e){return'number'==typeof e}function a(e){return'object'==typeof e&&null!==e}function o(e){return void 0===e}e.exports=t,t.EventEmitter=t,t.prototype._events=void 0,t.prototype._maxListeners=void 0,t.defaultMaxListeners=10,t.prototype.setMaxListeners=function(e){if(!r(e)||0>e||isNaN(e))throw TypeError('n must be a positive number');return this._maxListeners=e,this},t.prototype.emit=function(e){var t,r,s,d,l,i;if(this._events||(this._events={}),'error'===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length))if(t=arguments[1],t instanceof Error)throw t;else{var p=new Error('Uncaught, unspecified "error" event. ('+t+')');throw p.context=t,p}if(r=this._events[e],o(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:d=Array.prototype.slice.call(arguments,1),r.apply(this,d);}else if(a(r))for(d=Array.prototype.slice.call(arguments,1),i=r.slice(),s=i.length,l=0;l<s;l++)i[l].apply(this,d);return!0},t.prototype.addListener=function(e,r){var s;if(!n(r))throw TypeError('listener must be a function');return this._events||(this._events={}),this._events.newListener&&this.emit('newListener',e,n(r.listener)?r.listener:r),this._events[e]?a(this._events[e])?this._events[e].push(r):this._events[e]=[this._events[e],r]:this._events[e]=r,a(this._events[e])&&!this._events[e].warned&&(s=o(this._maxListeners)?t.defaultMaxListeners:this._maxListeners,s&&0<s&&this._events[e].length>s&&(this._events[e].warned=!0,console.error('(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.',this._events[e].length),'function'==typeof console.trace&&console.trace())),this},t.prototype.on=t.prototype.addListener,t.prototype.once=function(e,t){function r(){this.removeListener(e,r),a||(a=!0,t.apply(this,arguments))}if(!n(t))throw TypeError('listener must be a function');var a=!1;return r.listener=t,this.on(e,r),this},t.prototype.removeListener=function(e,t){var r,o,s,d;if(!n(t))throw TypeError('listener must be a function');if(!this._events||!this._events[e])return this;if(r=this._events[e],s=r.length,o=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit('removeListener',e,t);else if(a(r)){for(d=s;0<d--;)if(r[d]===t||r[d].listener&&r[d].listener===t){o=d;break}if(0>o)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(o,1),this._events.removeListener&&this.emit('removeListener',e,t)}return this},t.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)'removeListener'!==t&&this.removeAllListeners(t);return this.removeAllListeners('removeListener'),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},t.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[],t},t.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},t.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){'use strict';function r(e){return this instanceof r?void(l.call(this,e),p.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once('end',a)):new r(e)}function a(){this.allowHalfOpen||this._writableState.ended||s.nextTick(o,this)}function o(e){e.end()}var s=n(13),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=r;var d=n(3);d.inherits=n(0);var l=n(42),p=n(22);d.inherits(r,l);for(var u=i(p.prototype),c=0,f;c<u.length;c++)f=u[c],r.prototype[f]||(r.prototype[f]=p.prototype[f]);Object.defineProperty(r.prototype,'writableHighWaterMark',{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,'destroyed',{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),r.prototype._destroy=function(e,t){this.push(null),this.end(),s.nextTick(t,e)}},function(e){e.exports=function(e){var t=typeof e;return null!=e&&('object'==t||'function'==t)}},function(e){var t=Array.isArray;e.exports=t},function(e,t,n){(function(e,r){function a(e,n){var r={seen:[],stylize:s};return 3<=arguments.length&&(r.depth=arguments[2]),4<=arguments.length&&(r.colors=arguments[3]),h(n)?r.showHidden=n:n&&t._extend(r,n),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),d(r,e,r.depth)}function o(e,t){var n=a.styles[t];return n?'\x1B['+a.colors[n][0]+'m'+e+'\x1B['+a.colors[n][1]+'m':e}function s(e){return e}function i(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function d(e,r,a){if(e.customInspect&&r&&x(r.inspect)&&r.inspect!==t.inspect&&!(r.constructor&&r.constructor.prototype===r)){var o=r.inspect(a,e);return y(o)||(o=d(e,o,a)),o}var s=l(e,r);if(s)return s;var h=Object.keys(r),_=i(h);if(e.showHidden&&(h=Object.getOwnPropertyNames(r)),O(r)&&(0<=h.indexOf('message')||0<=h.indexOf('description')))return p(r);if(0===h.length){if(x(r)){var m=r.name?': '+r.name:'';return e.stylize('[Function'+m+']','special')}if(E(r))return e.stylize(RegExp.prototype.toString.call(r),'regexp');if(T(r))return e.stylize(Date.prototype.toString.call(r),'date');if(O(r))return p(r)}var b='',S=!1,R=['{','}'];if(g(r)&&(S=!0,R=['[',']']),x(r)){var k=r.name?': '+r.name:'';b=' [Function'+k+']'}if(E(r)&&(b=' '+RegExp.prototype.toString.call(r)),T(r)&&(b=' '+Date.prototype.toUTCString.call(r)),O(r)&&(b=' '+p(r)),0===h.length&&(!S||0==r.length))return R[0]+b+R[1];if(0>a)return E(r)?e.stylize(RegExp.prototype.toString.call(r),'regexp'):e.stylize('[Object]','special');e.seen.push(r);var n;return n=S?u(e,r,a,_,h):h.map(function(t){return c(e,r,a,_,t,S)}),e.seen.pop(),f(n,b,R)}function l(e,t){if(b(t))return e.stylize('undefined','undefined');if(y(t)){var n='\''+JSON.stringify(t).replace(/^"|"$/g,'').replace(/'/g,'\\\'').replace(/\\"/g,'"')+'\'';return e.stylize(n,'string')}return m(t)?e.stylize(''+t,'number'):h(t)?e.stylize(''+t,'boolean'):_(t)?e.stylize('null','null'):void 0}function p(e){return'['+Error.prototype.toString.call(e)+']'}function u(e,t,n,r,a){for(var o=[],s=0,i=t.length;s<i;++s)M(t,s+'')?o.push(c(e,t,n,r,s+'',!0)):o.push('');return a.forEach(function(a){a.match(/^\d+$/)||o.push(c(e,t,n,r,a,!0))}),o}function c(e,t,n,r,a,o){var s,i,l;if(l=Object.getOwnPropertyDescriptor(t,a)||{value:t[a]},l.get?l.set?i=e.stylize('[Getter/Setter]','special'):i=e.stylize('[Getter]','special'):l.set&&(i=e.stylize('[Setter]','special')),M(r,a)||(s='['+a+']'),i||(0>e.seen.indexOf(l.value)?(i=_(n)?d(e,l.value,null):d(e,l.value,n-1),-1<i.indexOf('\n')&&(o?i=i.split('\n').map(function(e){return'  '+e}).join('\n').substr(2):i='\n'+i.split('\n').map(function(e){return'   '+e}).join('\n'))):i=e.stylize('[Circular]','special')),b(s)){if(o&&a.match(/^\d+$/))return i;s=JSON.stringify(''+a),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,'name')):(s=s.replace(/'/g,'\\\'').replace(/\\"/g,'"').replace(/(^"|"$)/g,'\''),s=e.stylize(s,'string'))}return s+': '+i}function f(e,t,n){var r=0,a=e.reduce(function(e,t){return r++,0<=t.indexOf('\n')&&r++,e+t.replace(/\u001b\[\d\d?m/g,'').length+1},0);return 60<a?n[0]+(''===t?'':t+'\n ')+' '+e.join(',\n  ')+' '+n[1]:n[0]+t+' '+e.join(', ')+' '+n[1]}function g(e){return Array.isArray(e)}function h(e){return'boolean'==typeof e}function _(e){return null===e}function m(e){return'number'==typeof e}function y(e){return'string'==typeof e}function b(e){return void 0===e}function E(e){return S(e)&&'[object RegExp]'===R(e)}function S(e){return'object'==typeof e&&null!==e}function T(e){return S(e)&&'[object Date]'===R(e)}function O(t){return S(t)&&('[object Error]'===R(t)||t instanceof Error)}function x(e){return'function'==typeof e}function R(e){return Object.prototype.toString.call(e)}function k(e){return 10>e?'0'+e.toString(10):e.toString(10)}function w(){var e=new Date,t=[k(e.getHours()),k(e.getMinutes()),k(e.getSeconds())].join(':');return[e.getDate(),C[e.getMonth()],t].join(' ')}function M(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var A=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(a(arguments[n]));return t.join(' ')}for(var n=1,r=arguments,o=r.length,s=(e+'').replace(A,function(e){if('%%'===e)return'%';if(n>=o)return e;switch(e){case'%s':return r[n++]+'';case'%d':return+r[n++];case'%j':try{return JSON.stringify(r[n++])}catch(e){return'[Circular]'}default:return e;}}),i=r[n];n<o;i=r[++n])s+=_(i)||!S(i)?' '+i:' '+a(i);return s},t.deprecate=function(n,a){function o(){if(!s){if(r.throwDeprecation)throw new Error(a);else r.traceDeprecation?console.trace(a):console.error(a);s=!0}return n.apply(this,arguments)}if(b(e.process))return function(){return t.deprecate(n,a).apply(this,arguments)};if(!0===r.noDeprecation)return n;var s=!1;return o};var N={},I;t.debuglog=function(e){if(b(I)&&(I=r.env.NODE_DEBUG||''),e=e.toUpperCase(),!N[e])if(new RegExp('\\b'+e+'\\b','i').test(I)){var n=r.pid;N[e]=function(){var r=t.format.apply(t,arguments);console.error('%s %d: %s',e,n,r)}}else N[e]=function(){};return N[e]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:'cyan',number:'yellow',boolean:'yellow',undefined:'grey',null:'bold',string:'green',date:'magenta',regexp:'red'},t.isArray=g,t.isBoolean=h,t.isNull=_,t.isNullOrUndefined=function(e){return null==e},t.isNumber=m,t.isString=y,t.isSymbol=function(e){return'symbol'==typeof e},t.isUndefined=b,t.isRegExp=E,t.isObject=S,t.isDate=T,t.isError=O,t.isFunction=x,t.isPrimitive=function(e){return null===e||'boolean'==typeof e||'number'==typeof e||'string'==typeof e||'symbol'==typeof e||'undefined'==typeof e},t.isBuffer=n(106);var C=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];t.log=function(){console.log('%s - %s',w(),t.format.apply(t,arguments))},t.inherits=n(0),t._extend=function(e,t){if(!t||!S(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(t,n(2),n(1))},function(e){var t=Object.prototype,n=t.toString;e.exports=function(e){return n.call(e)}},function(e,a,s){'use strict';(function(e){function i(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function d(e,t){if(i()<t)throw new RangeError('Invalid typed array length');return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=l.prototype):(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l))return new l(e,t,n);if('number'==typeof e){if('string'==typeof t)throw new Error('If encoding is specified then the first argument must be a string');return f(this,e)}return p(this,e,t,n)}function p(e,t,n,r){if('number'==typeof t)throw new TypeError('"value" argument must not be a number');return'undefined'!=typeof ArrayBuffer&&t instanceof ArrayBuffer?_(e,t,n,r):'string'==typeof t?g(e,t,n):m(e,t)}function u(e){if('number'!=typeof e)throw new TypeError('"size" argument must be a number');else if(0>e)throw new RangeError('"size" argument must not be negative')}function c(e,t,n,r){return u(t),0>=t?d(e,t):void 0===n?d(e,t):'string'==typeof r?d(e,t).fill(n,r):d(e,t).fill(n)}function f(e,t){if(u(t),e=d(e,0>t?0:0|y(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function g(e,t,n){if(('string'!=typeof n||''===n)&&(n='utf8'),!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|b(t,n);e=d(e,r);var a=e.write(t,n);return a!==r&&(e=e.slice(0,a)),e}function h(e,t){var n=0>t.length?0:0|y(t.length);e=d(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function _(e,t,n,r){if(t.byteLength,0>n||t.byteLength<n)throw new RangeError('\'offset\' is out of bounds');if(t.byteLength<n+(r||0))throw new RangeError('\'length\' is out of bounds');return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),l.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=l.prototype):e=h(e,t),e}function m(e,t){if(l.isBuffer(t)){var n=0|y(t.length);return(e=d(e,n),0===e.length)?e:(t.copy(e,0,0,n),e)}if(t){if('undefined'!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||'length'in t)return'number'!=typeof t.length||$(t.length)?d(e,0):h(e,t);if('Buffer'===t.type&&te(t.data))return h(e,t.data)}throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')}function y(e){if(e>=i())throw new RangeError('Attempt to allocate Buffer larger than maximum size: 0x'+i().toString(16)+' bytes');return 0|e}function b(e,t){if(l.isBuffer(e))return e.length;if('undefined'!=typeof ArrayBuffer&&'function'==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;'string'!=typeof e&&(e=''+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case'ascii':case'latin1':case'binary':return n;case'utf8':case'utf-8':case void 0:return G(e).length;case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return 2*n;case'hex':return n>>>1;case'base64':return J(e).length;default:if(r)return G(e).length;t=(''+t).toLowerCase(),r=!0;}}function E(e,t,n){var r=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return'';if((void 0===n||n>this.length)&&(n=this.length),0>=n)return'';if(n>>>=0,t>>>=0,n<=t)return'';for(e||(e='utf8');;)switch(e){case'hex':return P(this,t,n);case'utf8':case'utf-8':return I(this,t,n);case'ascii':return v(this,t,n);case'latin1':case'binary':return D(this,t,n);case'base64':return N(this,t,n);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return L(this,t,n);default:if(r)throw new TypeError('Unknown encoding: '+e);e=(e+'').toLowerCase(),r=!0;}}function S(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function T(e,t,n,r,a){if(0===e.length)return-1;if('string'==typeof n?(r=n,n=0):2147483647<n?n=2147483647:-2147483648>n&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:e.length-1),0>n&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(0>n)if(a)n=0;else return-1;if('string'==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:O(e,t,n,r,a);if('number'==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&'function'==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):O(e,[t],n,r,a);throw new TypeError('val must be string, number or Buffer')}function O(e,t,n,r,a){function o(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,d=e.length,l=t.length;if(void 0!==r&&(r=(r+'').toLowerCase(),'ucs2'===r||'ucs-2'===r||'utf16le'===r||'utf-16le'===r)){if(2>e.length||2>t.length)return-1;s=2,d/=2,l/=2,n/=2}var p;if(a){var i=-1;for(p=n;p<d;p++)if(o(e,p)!==o(t,-1==i?0:p-i))-1!=i&&(p-=p-i),i=-1;else if(-1==i&&(i=p),p-i+1===l)return i*s}else for(n+l>d&&(n=d-l),p=n;0<=p;p--){for(var u=!0,c=0;c<l;c++)if(o(e,p+c)!==o(t,c)){u=!1;break}if(u)return p}return-1}function x(e,t,n,r){n=+n||0;var a=e.length-n;r?(r=+r,r>a&&(r=a)):r=a;var o=t.length;if(0!=o%2)throw new TypeError('Invalid hex string');r>o/2&&(r=o/2);for(var s=0,i;s<r;++s){if(i=parseInt(t.substr(2*s,2),16),isNaN(i))return s;e[n+s]=i}return s}function R(e,t,n,r){return Z(G(t,e.length-n),e,n,r)}function k(e,t,n,r){return Z(Q(t),e,n,r)}function w(e,t,n,r){return k(e,t,n,r)}function M(e,t,n,r){return Z(J(t),e,n,r)}function A(e,t,n,r){return Z(K(t,e.length-n),e,n,r)}function N(e,t,n){return 0===t&&n===e.length?X.fromByteArray(e):X.fromByteArray(e.slice(t,n))}function I(e,t,n){n=o(e.length,n);for(var r=[],a=t;a<n;){var s=e[a],i=null,d=239<s?4:223<s?3:191<s?2:1;if(a+d<=n){var l,p,u,c;1==d?128>s&&(i=s):2==d?(l=e[a+1],128==(192&l)&&(c=(31&s)<<6|63&l,127<c&&(i=c))):3==d?(l=e[a+1],p=e[a+2],128==(192&l)&&128==(192&p)&&(c=(15&s)<<12|(63&l)<<6|63&p,2047<c&&(55296>c||57343<c)&&(i=c))):4==d?(l=e[a+1],p=e[a+2],u=e[a+3],128==(192&l)&&128==(192&p)&&128==(192&u)&&(c=(15&s)<<18|(63&l)<<12|(63&p)<<6|63&u,65535<c&&1114112>c&&(i=c))):void 0}null===i?(i=65533,d=1):65535<i&&(i-=65536,r.push(55296|1023&i>>>10),i=56320|1023&i),r.push(i),a+=d}return C(r)}function C(e){var t=e.length;if(t<=ne)return r.apply(String,e);for(var n='',a=0;a<t;)n+=r.apply(String,e.slice(a,a+=ne));return n}function v(e,t,n){var a='';n=o(e.length,n);for(var s=t;s<n;++s)a+=r(127&e[s]);return a}function D(e,t,n){var a='';n=o(e.length,n);for(var s=t;s<n;++s)a+=r(e[s]);return a}function P(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var a='',o=t;o<n;++o)a+=z(e[o]);return a}function L(e,t,n){for(var a=e.slice(t,n),o='',s=0;s<a.length;s+=2)o+=r(a[s]+256*a[s+1]);return o}function U(e,t,n){if(0!=e%1||0>e)throw new RangeError('offset is not uint');if(e+t>n)throw new RangeError('Trying to access beyond buffer length')}function B(e,t,n,r,a,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError('Index out of range')}function j(e,t,n,r){0>t&&(t=65535+t+1);for(var a=0,s=o(e.length-n,2);a<s;++a)e[n+a]=(t&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function F(e,t,n,r){0>t&&(t=4294967295+t+1);for(var a=0,s=o(e.length-n,4);a<s;++a)e[n+a]=255&t>>>8*(r?a:3-a)}function H(e,t,n,r){if(n+r>e.length)throw new RangeError('Index out of range');if(0>n)throw new RangeError('Index out of range')}function W(e,t,n,r,a){return a||H(e,t,n,4,34028234663852886e22,-34028234663852886e22),ee.write(e,t,n,r,23,4),n+4}function Y(e,t,n,r,a){return a||H(e,t,n,8,17976931348623157e292,-17976931348623157e292),ee.write(e,t,n,r,52,8),n+8}function q(e){if(e=V(e).replace(re,''),2>e.length)return'';for(;0!=e.length%4;)e+='=';return e}function V(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,'')}function z(e){return 16>e?'0'+e.toString(16):e.toString(16)}function G(e,t){t=t||Infinity;for(var n=e.length,r=null,a=[],o=0,s;o<n;++o){if(s=e.charCodeAt(o),55295<s&&57344>s){if(!r){if(56319<s){-1<(t-=3)&&a.push(239,191,189);continue}else if(o+1===n){-1<(t-=3)&&a.push(239,191,189);continue}r=s;continue}if(56320>s){-1<(t-=3)&&a.push(239,191,189),r=s;continue}s=(r-55296<<10|s-56320)+65536}else r&&-1<(t-=3)&&a.push(239,191,189);if(r=null,128>s){if(0>(t-=1))break;a.push(s)}else if(2048>s){if(0>(t-=2))break;a.push(192|s>>6,128|63&s)}else if(65536>s){if(0>(t-=3))break;a.push(224|s>>12,128|63&s>>6,128|63&s)}else if(1114112>s){if(0>(t-=4))break;a.push(240|s>>18,128|63&s>>12,128|63&s>>6,128|63&s)}else throw new Error('Invalid code point')}return a}function Q(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function K(e,t){for(var n=[],r=0,a,o,s;r<e.length&&!(0>(t-=2));++r)a=e.charCodeAt(r),o=a>>8,s=a%256,n.push(s),n.push(o);return n}function J(e){return X.toByteArray(q(e))}function Z(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function $(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var X=s(91),ee=s(92),te=s(40);a.Buffer=l,a.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},a.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=e.TYPED_ARRAY_SUPPORT===void 0?function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&'function'==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}():e.TYPED_ARRAY_SUPPORT,a.kMaxLength=i(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return p(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,'undefined'!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return c(null,e,t,n)},l.allocUnsafe=function(e){return f(null,e)},l.allocUnsafeSlow=function(e){return f(null,e)},l.isBuffer=function(e){return!!(null!=e&&e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('Arguments must be Buffers');if(e===t)return 0;for(var n=e.length,r=t.length,a=0,s=o(n,r);a<s;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch((e+'').toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'latin1':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return!0;default:return!1;}},l.concat=function(e,t){if(!te(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=l.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var o=e[n];if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,a),a+=o.length}return r},l.byteLength=b,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError('Buffer size must be a multiple of 16-bits');for(var t=0;t<e;t+=2)S(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError('Buffer size must be a multiple of 32-bits');for(var t=0;t<e;t+=4)S(this,t,t+3),S(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError('Buffer size must be a multiple of 64-bits');for(var t=0;t<e;t+=8)S(this,t,t+7),S(this,t+1,t+6),S(this,t+2,t+5),S(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0==e?'':0===arguments.length?I(this,0,e):E.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError('Argument must be a Buffer');return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e='',t=a.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString('hex',0,t).match(/.{2}/g).join(' '),this.length>t&&(e+=' ... ')),'<Buffer '+e+'>'},l.prototype.compare=function(e,t,n,r,a){if(!l.isBuffer(e))throw new TypeError('Argument must be a Buffer');if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),0>t||n>e.length||0>r||a>this.length)throw new RangeError('out of range index');if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,a>>>=0,this===e)return 0;for(var s=a-r,d=n-t,p=o(s,d),u=this.slice(r,a),c=e.slice(t,n),f=0;f<p;++f)if(u[f]!==c[f]){s=u[f],d=c[f];break}return s<d?-1:d<s?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return T(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return T(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r='utf8',n=this.length,t=0;else if(void 0===n&&'string'==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t|=0,isFinite(n)?(n|=0,void 0===r&&(r='utf8')):(r=n,n=void 0);else throw new Error('Buffer.write(string, encoding, offset[, length]) is no longer supported');var a=this.length-t;if((void 0===n||n>a)&&(n=a),0<e.length&&(0>n||0>t)||t>this.length)throw new RangeError('Attempt to write outside buffer bounds');r||(r='utf8');for(var o=!1;;)switch(r){case'hex':return x(this,e,t,n);case'utf8':case'utf-8':return R(this,e,t,n);case'ascii':return k(this,e,t,n);case'latin1':case'binary':return w(this,e,t,n);case'base64':return M(this,e,t,n);case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return A(this,e,t,n);default:if(o)throw new TypeError('Unknown encoding: '+r);r=(''+r).toLowerCase(),o=!0;}},l.prototype.toJSON=function(){return{type:'Buffer',data:Array.prototype.slice.call(this._arr||this,0)}};var ne=4096;l.prototype.slice=function(e,t){var n=this.length;e=~~e,t=t===void 0?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r;if(l.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=l.prototype;else{var a=t-e;r=new l(a,void 0);for(var o=0;o<a;++o)r[o]=this[o+e]}return r},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);for(var r=this[e],a=1,o=0;++o<t&&(a*=256);)r+=this[e+o]*a;return r},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||U(e,t,this.length);for(var r=this[e+--t],a=1;0<t&&(a*=256);)r+=this[e+--t]*a;return r},l.prototype.readUInt8=function(e,t){return t||U(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||U(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||U(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||U(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||U(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||U(e,t,this.length);for(var a=this[e],o=1,s=0;++s<t&&(o*=256);)a+=this[e+s]*o;return o*=128,a>=o&&(a-=n(2,8*t)),a},l.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||U(e,t,this.length);for(var a=t,o=1,s=this[e+--a];0<a&&(o*=256);)s+=this[e+--a]*o;return o*=128,s>=o&&(s-=n(2,8*t)),s},l.prototype.readInt8=function(e,t){return t||U(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||U(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||U(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||U(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||U(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||U(e,4,this.length),ee.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||U(e,4,this.length),ee.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||U(e,8,this.length),ee.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||U(e,8,this.length),ee.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,r,a){if(e=+e,t|=0,r|=0,!a){var o=n(2,8*r)-1;B(this,e,t,r,o,0)}var s=1,d=0;for(this[t]=255&e;++d<r&&(s*=256);)this[t+d]=255&e/s;return t+r},l.prototype.writeUIntBE=function(e,t,r,a){if(e=+e,t|=0,r|=0,!a){var o=n(2,8*r)-1;B(this,e,t,r,o,0)}var s=r-1,i=1;for(this[t+s]=255&e;0<=--s&&(i*=256);)this[t+s]=255&e/i;return t+r},l.prototype.writeUInt8=function(e,n,r){return e=+e,n|=0,r||B(this,e,n,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=t(e)),this[n]=255&e,n+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):F(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,r,a){if(e=+e,t|=0,!a){var o=n(2,8*r-1);B(this,e,t,r,o-1,-o)}var s=0,i=1,d=0;for(this[t]=255&e;++s<r&&(i*=256);)0>e&&0==d&&0!==this[t+s-1]&&(d=1),this[t+s]=255&(e/i>>0)-d;return t+r},l.prototype.writeIntBE=function(e,t,r,a){if(e=+e,t|=0,!a){var o=n(2,8*r-1);B(this,e,t,r,o-1,-o)}var s=r-1,i=1,d=0;for(this[t+s]=255&e;0<=--s&&(i*=256);)0>e&&0==d&&0!==this[t+s+1]&&(d=1),this[t+s]=255&(e/i>>0)-d;return t+r},l.prototype.writeInt8=function(e,n,r){return e=+e,n|=0,r||B(this,e,n,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=t(e)),0>e&&(e=255+e+1),this[n]=255&e,n+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):F(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return W(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return W(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return Y(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return Y(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError('targetStart out of bounds');if(0>n||n>=this.length)throw new RangeError('sourceStart out of bounds');if(0>r)throw new RangeError('sourceEnd out of bounds');r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var a=r-n,o;if(this===e&&n<t&&t<r)for(o=a-1;0<=o;--o)e[o+t]=this[o+n];else if(1e3>a||!l.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},l.prototype.fill=function(e,t,n,r){if('string'==typeof e){if('string'==typeof t?(r=t,t=0,n=this.length):'string'==typeof n&&(r=n,n=this.length),1===e.length){var a=e.charCodeAt(0);256>a&&(e=a)}if(void 0!==r&&'string'!=typeof r)throw new TypeError('encoding must be a string');if('string'==typeof r&&!l.isEncoding(r))throw new TypeError('Unknown encoding: '+r)}else'number'==typeof e&&(e&=255);if(0>t||this.length<t||this.length<n)throw new RangeError('Out of range index');if(n<=t)return this;t>>>=0,n=n===void 0?this.length:n>>>0,e||(e=0);var o;if('number'==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=l.isBuffer(e)?e:G(new l(e,r).toString()),i=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%i]}return this};var re=/[^+\/0-9A-Za-z-_]/g}).call(a,s(2))},function(e,t,n){'use strict';(function(t){e.exports=t.version&&0!==t.version.indexOf('v0.')&&(0!==t.version.indexOf('v1.')||0===t.version.indexOf('v1.8.'))?t:{nextTick:function(e,n,r,a){if('function'!=typeof e)throw new TypeError('"callback" argument must be a function');var o=arguments.length,s,d;switch(o){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,a)});default:for(s=Array(o-1),d=0;d<s.length;)s[d++]=arguments[d];return t.nextTick(function(){e.apply(null,s)});}}}}).call(t,n(1))},function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return s(e,t,n)}var o=n(12),s=o.Buffer;s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?e.exports=o:(r(o,t),t.Buffer=a),r(s,a),a.from=function(e,t,n){if('number'==typeof e)throw new TypeError('Argument must not be a number');return s(e,t,n)},a.alloc=function(e,t,n){if('number'!=typeof e)throw new TypeError('Argument must be a number');var r=s(e);return void 0===t?r.fill(0):'string'==typeof n?r.fill(t,n):r.fill(t),r},a.allocUnsafe=function(e){if('number'!=typeof e)throw new TypeError('Argument must be a number');return s(e)},a.allocUnsafeSlow=function(e){if('number'!=typeof e)throw new TypeError('Argument must be a number');return o.SlowBuffer(e)}},function(e,t,n){'use strict';function r(e){if(!e)return'utf8';for(var t;;)switch(e){case'utf8':case'utf-8':return'utf8';case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':return'utf16le';case'latin1':case'binary':return'latin1';case'base64':case'ascii':case'hex':return e;default:if(t)return;e=(''+e).toLowerCase(),t=!0;}}function a(e){var t=r(e);if('string'!=typeof t&&(_.isEncoding===m||!m(e)))throw new Error('Unknown encoding: '+e);return t||e}function o(e){this.encoding=a(e);var t;switch(this.encoding){case'utf16le':this.text=p,this.end=u,t=4;break;case'utf8':this.fillLast=l,t=4;break;case'base64':this.text=c,this.end=f,t=3;break;default:return this.write=g,void(this.end=h);}this.lastNeed=0,this.lastTotal=0,this.lastChar=_.allocUnsafe(t)}function s(e){if(127>=e)return 0;return 6==e>>5?2:14==e>>4?3:30==e>>3?4:2==e>>6?-1:-2}function d(e,t,n){var r=t.length-1;if(r<n)return 0;var a=s(t[r]);return 0<=a?(0<a&&(e.lastNeed=a-1),a):--r<n||-2===a?0:(a=s(t[r]),0<=a)?(0<a&&(e.lastNeed=a-2),a):--r<n||-2===a?0:(a=s(t[r]),0<=a?(0<a&&(2===a?a=0:e.lastNeed=a-3),a):0)}function i(e,t){if(128!=(192&t[0]))return e.lastNeed=0,'\uFFFD';if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,'\uFFFD';if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,'\uFFFD'}}function l(e){var t=this.lastTotal-this.lastNeed,n=i(this,e,t);return void 0===n?this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length):n}function p(e,t){if(0==(e.length-t)%2){var n=e.toString('utf16le',t);if(n){var r=n.charCodeAt(n.length-1);if(55296<=r&&56319>=r)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString('utf16le',t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):'';if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString('utf16le',0,n)}return t}function c(e,t){var r=(e.length-t)%3;return 0==r?e.toString('base64',t):(this.lastNeed=3-r,this.lastTotal=3,1==r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString('base64',t,e.length-r))}function f(e){var t=e&&e.length?this.write(e):'';return this.lastNeed?t+this.lastChar.toString('base64',0,3-this.lastNeed):t}function g(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):''}var _=n(14).Buffer,m=_.isEncoding||function(e){switch(e=''+e,e&&e.toLowerCase()){case'hex':case'utf8':case'utf-8':case'ascii':case'binary':case'base64':case'ucs2':case'ucs-2':case'utf16le':case'utf-16le':case'raw':return!0;default:return!1;}};t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return'';var t,n;if(this.lastNeed){if(t=this.fillLast(e),void 0===t)return'';n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||''},o.prototype.end=function(e){var t=e&&e.length?this.write(e):'';return this.lastNeed?t+'\uFFFD':t},o.prototype.text=function(e,t){var n=d(this,e,t);if(!this.lastNeed)return e.toString('utf8',t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString('utf8',t,r)},o.prototype.fillLast=function(e){return this.lastNeed<=e.length?(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length)}},function(e){e.exports=function(e){return null!=e&&'object'==typeof e}},function(e,t,n){var r=n(24);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(19),a=r.isFinite;e.exports=function(e){return'number'==typeof e&&a(e)}},function(e,t,n){var r=n(82),a='object'==typeof self&&self&&self.Object===Object&&self,o=r||a||Function('return this')();e.exports=o},function(e){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){t=e.exports=n(42),t.Stream=t,t.Readable=t,t.Writable=n(22),t.Duplex=n(7),t.Transform=n(46),t.PassThrough=n(100)},function(e,n,r){'use strict';(function(n,a,o){function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){M(t,e)}}function i(e){return P.from(e)}function d(e){return P.isBuffer(e)||e instanceof L}function l(){}function p(e,n){I=I||r(7),e=e||{};var a=n instanceof I;this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var o=e.highWaterMark,i=e.writableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:a&&(i||0===i)?i:d,this.highWaterMark=t(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=!1===e.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=e.defaultEncoding||'utf8',this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){b(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function u(e){return I=I||r(7),B.call(u,this)||this instanceof I?void(this._writableState=new p(e,this),this.writable=!0,e&&('function'==typeof e.write&&(this._write=e.write),'function'==typeof e.writev&&(this._writev=e.writev),'function'==typeof e.destroy&&(this._destroy=e.destroy),'function'==typeof e.final&&(this._final=e.final)),D.call(this)):new u(e)}function c(e,t){var n=new Error('write after end');e.emit('error',n),A.nextTick(t,n)}function f(e,t,n,r){var a=!0,o=!1;return null===n?o=new TypeError('May not write null values to stream'):'string'!=typeof n&&void 0!==n&&!t.objectMode&&(o=new TypeError('Invalid non-string/buffer chunk')),o&&(e.emit('error',o),A.nextTick(r,o),a=!1),a}function g(e,t,n){return e.objectMode||!1===e.decodeStrings||'string'!=typeof t||(t=P.from(t,n)),t}function h(e,t,n,r,a,o){if(!n){var s=g(t,r,a);r!==s&&(n=!0,a='buffer',r=s)}var i=t.objectMode?1:r.length;t.length+=i;var d=t.length<t.highWaterMark;if(d||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:a,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else _(e,t,!1,i,r,a,o);return d}function _(e,t,n,r,a,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(a,t.onwrite):e._write(a,o,t.onwrite),t.sync=!1}function m(e,t,n,r,a){--t.pendingcb,n?(A.nextTick(a,r),A.nextTick(k,e,t),e._writableState.errorEmitted=!0,e.emit('error',r)):(a(r),e._writableState.errorEmitted=!0,e.emit('error',r),k(e,t))}function y(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function b(e,t){var n=e._writableState,r=n.sync,a=n.writecb;if(y(n),t)m(e,n,r,t,a);else{var o=O(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||T(e,n),r?N(E,e,n,o,a):E(e,n,o,a)}}function E(e,t,n,r){n||S(e,t),t.pendingcb--,r(),k(e,t)}function S(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit('drain'))}function T(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,a=Array(r),o=t.corkedRequestsFree;o.entry=n;for(var i=0,d=!0;n;)a[i]=n,n.isBuf||(d=!1),n=n.next,i+=1;a.allBuffers=d,_(e,t,!0,t.length,a,'',o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,p=n.encoding,u=n.callback,c=t.objectMode?1:l.length;if(_(e,t,!1,c,l,p,u),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function O(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function x(e,t){e._final(function(n){t.pendingcb--,n&&e.emit('error',n),t.prefinished=!0,e.emit('prefinish'),k(e,t)})}function R(e,t){t.prefinished||t.finalCalled||('function'==typeof e._final?(t.pendingcb++,t.finalCalled=!0,A.nextTick(x,e,t)):(t.prefinished=!0,e.emit('prefinish')))}function k(e,t){var n=O(t);return n&&(R(e,t),0===t.pendingcb&&(t.finished=!0,e.emit('finish'))),n}function w(e,t,n){t.ending=!0,k(e,t),n&&(t.finished?A.nextTick(n):e.once('finish',n)),t.ended=!0,e.writable=!1}function M(e,t,n){var r=e.entry;for(e.entry=null;r;){var a=r.callback;t.pendingcb--,a(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var A=r(13);e.exports=u;var N=!n.browser&&-1<['v0.10','v0.9.'].indexOf(n.version.slice(0,5))?a:A.nextTick,I;u.WritableState=p;var C=r(3);C.inherits=r(0);var v={deprecate:r(99)},D=r(43),P=r(14).Buffer,L=o.Uint8Array||function(){},U=r(44);C.inherits(u,D),p.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(p.prototype,'buffer',{get:v.deprecate(function(){return this.getBuffer()},'_writableState.buffer is deprecated. Use _writableState.getBuffer instead.','DEP0003')})}catch(e){}}();var B;'function'==typeof Symbol&&Symbol.hasInstance&&'function'==typeof Function.prototype[Symbol.hasInstance]?(B=Function.prototype[Symbol.hasInstance],Object.defineProperty(u,Symbol.hasInstance,{value:function(e){return!!B.call(this,e)||!(this!==u)&&e&&e._writableState instanceof p}})):B=function(e){return e instanceof this},u.prototype.pipe=function(){this.emit('error',new Error('Cannot pipe, not readable'))},u.prototype.write=function(e,t,n){var r=this._writableState,a=!1,o=!r.objectMode&&d(e);return o&&!P.isBuffer(e)&&(e=i(e)),'function'==typeof t&&(n=t,t=null),o?t='buffer':!t&&(t=r.defaultEncoding),'function'!=typeof n&&(n=l),r.ended?c(this,n):(o||f(this,r,e,n))&&(r.pendingcb++,a=h(this,r,o,e,t,n)),a},u.prototype.cork=function(){var e=this._writableState;e.corked++},u.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&T(this,e))},u.prototype.setDefaultEncoding=function(e){if('string'==typeof e&&(e=e.toLowerCase()),!(-1<['hex','utf8','utf-8','ascii','binary','base64','ucs2','ucs-2','utf16le','utf-16le','raw'].indexOf((e+'').toLowerCase())))throw new TypeError('Unknown encoding: '+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(u.prototype,'writableHighWaterMark',{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),u.prototype._write=function(e,t,n){n(new Error('_write() is not implemented'))},u.prototype._writev=null,u.prototype.end=function(e,t,n){var r=this._writableState;'function'==typeof e?(n=e,e=null,t=null):'function'==typeof t&&(n=t,t=null),null!==e&&e!==void 0&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||w(this,r,n)},Object.defineProperty(u.prototype,'destroyed',{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),u.prototype.destroy=U.destroy,u.prototype._undestroy=U.undestroy,u.prototype._destroy=function(e,t){this.end(),t(e)}}).call(n,r(1),r(45).setImmediate,r(2))},function(e,t,n){var r=n(4);e.exports=function(){var e=arguments,t=r(e[0]);return 3>e.length?t:t.replace(e[1],e[2])}},function(e){e.exports=function(e,t){return e===t||e!==e&&t!==t}},function(e,t,n){var r=n(126);e.exports=function(e,t,n){'__proto__'==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){var r=n(73);e.exports=function(e,t,n){var a=null==e?void 0:r(e,t);return a===void 0?n:a}},function(e){e.exports=function(){return!1}},function(e){'use strict';function t(){}function n(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function r(e,t,r,a,o){if('function'!=typeof r)throw new TypeError('The listener must be a function');var s=new n(r,a||e,o),i=d?d+t:t;return e._events[i]?e._events[i].fn?e._events[i]=[e._events[i],s]:e._events[i].push(s):(e._events[i]=s,e._eventsCount++),e}function a(e,n){0==--e._eventsCount?e._events=new t:delete e._events[n]}function o(){this._events=new t,this._eventsCount=0}var s=Object.prototype.hasOwnProperty,d='~';Object.create&&(t.prototype=Object.create(null),!new t().__proto__&&(d=!1)),o.prototype.eventNames=function(){var e=[],t,n;if(0===this._eventsCount)return e;for(n in t=this._events)s.call(t,n)&&e.push(d?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e},o.prototype.listeners=function(e){var t=d?d+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,a=n.length,o=Array(a);r<a;r++)o[r]=n[r].fn;return o},o.prototype.listenerCount=function(e){var t=d?d+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,r,a,o){var s=d?d+e:e;if(!this._events[s])return!1;var l=this._events[s],p=arguments.length,u,c;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),p){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,r),!0;case 5:return l.fn.call(l.context,t,n,r,a),!0;case 6:return l.fn.call(l.context,t,n,r,a,o),!0;}for(c=1,u=Array(p-1);c<p;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var i=l.length,f;for(c=0;c<i;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),p){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;case 4:l[c].fn.call(l[c].context,t,n,r);break;default:if(!u)for(f=1,u=Array(p-1);f<p;f++)u[f-1]=arguments[f];l[c].fn.apply(l[c].context,u);}}return!0},o.prototype.on=function(e,t,n){return r(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return r(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,n,r){var o=d?d+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||r&&!s.once||n&&s.context!==n||a(this,o);else{for(var l=0,i=[],p=s.length;l<p;l++)(s[l].fn!==t||r&&!s[l].once||n&&s[l].context!==n)&&i.push(s[l]);i.length?this._events[o]=1===i.length?i[0]:i:a(this,o)}return this},o.prototype.removeAllListeners=function(e){var n;return e?(n=d?d+e:e,this._events[n]&&a(this,n)):(this._events=new t,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=d,o.EventEmitter=o,e.exports=o},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});t.delayReject=(e,t)=>new Promise((n,r)=>setTimeout(r,e,t)),t.onceResolve=(e,t)=>new Promise((n)=>e.once(t,n))},function(e,t,n){'use strict';(function(t){var n;'undefined'==typeof WebSocket?'undefined'==typeof MozWebSocket?'undefined'==typeof t?'undefined'==typeof window?'undefined'!=typeof self&&(n=self.WebSocket||self.MozWebSocket):n=window.WebSocket||window.MozWebSocket:n=t.WebSocket||t.MozWebSocket:n=MozWebSocket:n=WebSocket,e.exports=n}).call(t,n(2))},function(e,t,n){'use strict';function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,'__esModule',{value:!0}),t.privateMessage=t.userNoticeMessage=t.noticeMessage=t.roomStateMessage=t.userStateMessage=t.globalUserStateMessage=t.clearChatMessage=t.namesEndMessage=t.namesMessage=t.joinOrPartMessage=t.hostTargetMessage=t.modeMessage=void 0;var s=n(81),i=a(s),d=n(32),l=a(d),p=n(18),u=a(p),c=n(83),f=a(c),g=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++)for(var r in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},h=n(87),_=n(47),m=a(_),y=n(5),b=r(y),E=n(48),S=r(E),T=n(115),O=r(T);const x=(e)=>{const{tags:t}=e,n=o(e,['tags']);return g({tags:O.userState(t)},n,S.cheerEvent(t.bits))};t.modeMessage=(e)=>{const[,t,n,r]=/:[^\s]+ MODE (#[^\s]+) (-|\+)o ([^\s]+)/g.exec(e._raw),a='+'===n;return g({},e,{event:a?b.EVENTS.MOD_GAINED:b.EVENTS.MOD_LOST,channel:t,username:r,message:void 0,isModerator:a})},t.hostTargetMessage=(e)=>{const[,t,n,r]=/:tmi.twitch.tv HOSTTARGET (#[^\s]+) :([^\s]+)?\s?(\d+)?/g.exec(e._raw);return g({},e,{channel:t,username:n,event:(0,i.default)('-'===n?b.NOTICE_MESSAGE_IDS.HOST_OFF:b.NOTICE_MESSAGE_IDS.HOST_ON),numberOfViewers:(0,u.default)((0,l.default)(r))?parseInt(r,10):void 0,message:void 0})},t.joinOrPartMessage=(e)=>{const[,t,,,n,r]=/:(.+)!(.+)@(.+).tmi.twitch.tv (JOIN|PART) (#.+)/g.exec(e._raw);return g({},e,{channel:r,command:n,username:t,message:void 0})},t.namesMessage=(e)=>{const[,,,t,n]=/:(.+).tmi.twitch.tv 353 (.+) = (#.+) :(.+)/g.exec(e._raw),r=n.split(' ');return g({},e,{channel:t,event:b.EVENTS.NAMES,usernames:r,listType:1e3<n.length?'mods':'chatters',message:void 0})},t.namesEndMessage=(e)=>{const[,t,,n,r]=/:(.+).tmi.twitch.tv 366 (.+) (#.+) :(.+)/g.exec(e._raw);return g({},e,{channel:n,event:b.EVENTS.NAMES_END,username:t,message:r})},t.clearChatMessage=(e)=>{const{tags:t,message:n}=e,r=o(e,['tags','message']);return'undefined'==typeof n?g({},r):g({},r,{tags:g({},t,{banReason:S.generalString(t.banReason),banDuration:S.generalNumber(t.banDuration)}),event:b.EVENTS.USER_BANNED,username:n})},t.globalUserStateMessage=(e)=>{const{tags:t}=e,n=o(e,['tags']);return g({tags:O.globalUserState(t)},n)},t.userStateMessage=x,t.roomStateMessage=(e)=>{const{tags:t}=e,n=o(e,['tags']);return g({tags:O.roomState(t)},n)},t.noticeMessage=(e)=>{const{tags:t}=e,n=o(e,['tags']),r=(0,i.default)(t.msgId);switch(t.msgId){case b.NOTICE_MESSAGE_IDS.ROOM_MODS:return g({event:r,tags:t,mods:S.mods(n.message)},n);default:return g({event:r,tags:t},n);}},t.userNoticeMessage=(e)=>{const t=O.userNotice(e.tags);switch(t.msgId){case b.USER_NOTICE_MESSAGE_IDS.SUBSCRIPTION:return g({},e,{tags:t,event:b.EVENTS.SUBSCRIPTION,systemMessage:S.generalString(t.systemMsg),months:t.msgParamMonths,subPlan:t.msgParamSubPlan,subPlanName:S.generalString(t.msgParamSubPlanName)});case b.USER_NOTICE_MESSAGE_IDS.RESUBSCRIPTION:return g({},e,{tags:t,event:b.EVENTS.RESUBSCRIPTION,systemMessage:S.generalString(t.systemMsg),months:t.msgParamMonths,subPlan:t.msgParamSubPlan,subPlanName:S.generalString(t.msgParamSubPlanName)});case b.USER_NOTICE_MESSAGE_IDS.SUBSCRIPTION_GIFT:return g({},e,{tags:t,event:b.EVENTS.SUBSCRIPTION_GIFT,systemMessage:S.generalString(t.systemMsg),recipientDisplayName:t.msgParamRecipientDisplayName,recipientId:t.msgParamRecipientId,recipientUserName:t.msgParamRecipientName});case b.USER_NOTICE_MESSAGE_IDS.RAID:return g({},e,{tags:t,event:b.EVENTS.RAID,systemMessage:S.generalString(t.systemMsg),raiderDisplayName:t.msgParamDisplayName,raiderUserName:t.msgParamLogin,raiderViewerCount:t.msgParamViewerCount});case b.USER_NOTICE_MESSAGE_IDS.RITUAL:return g({},e,{tags:t,event:b.EVENTS.RITUAL,systemMessage:S.generalString(t.systemMsg),ritualName:t.msgParamRitualName});default:return g({},e,{tags:t});}},t.privateMessage=x,t.default=(e)=>{const t=e.replace(/\r\n$/,'').split(/\n/g);return t.map((e)=>{const{raw:t,tags:n,command:r,params:[a,o]}=(0,h.parse)(e);return{_raw:t,timestamp:S.generalTimestamp(parseInt(n['tmi-sent-ts'],10)),command:r,channel:a,tags:(0,f.default)(n)?void 0:(0,m.default)(n),message:o}})}},function(e,t,n){var r=n(8),a=n(27),o=0/0,s=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,l=/^0o[0-7]+$/i,p=parseInt;e.exports=function(e){if('number'==typeof e)return e;if(a(e))return o;if(r(e)){var t='function'==typeof e.valueOf?e.valueOf():e;e=r(t)?t+'':t}if('string'!=typeof e)return 0===e?e:+e;e=e.replace(s,'');var n=d.test(e);return n||l.test(e)?p(e.slice(2),n?2:8):i.test(e)?o:+e}},function(e){e.exports=function(){return!1}},function(e,t,n){var r=n(35),a=n(86);e.exports=function(e){return null!=e&&a(e.length)&&!r(e)}},function(e,t,n){var r=n(11),a=n(8);e.exports=function(e){if(!a(e))return!1;var t=r(e);return t=='[object Function]'||t=='[object GeneratorFunction]'||t=='[object AsyncFunction]'||t=='[object Proxy]'}},function(e){e.exports=function(){return!1}},function(e){e.exports=function(){return!1}},function(e){e.exports=function(){return!1}},function(e,t,n){(function(t){function r(e){return this instanceof r?void(i.call(this,e),d.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once('end',a)):new r(e)}function a(){this.allowHalfOpen||this._writableState.ended||t.nextTick(this.end.bind(this))}e.exports=r;var o=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},s=n(3);s.inherits=n(0);var i=n(93),d=n(105);s.inherits(r,i),function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}(o(d.prototype),function(e){r.prototype[e]||(r.prototype[e]=d.prototype[e])})}).call(t,n(1))},function(e){var t={}.toString;e.exports=Array.isArray||function(e){return'[object Array]'==t.call(e)}},function(e,t,n){function r(){a.call(this)}e.exports=r;var a=n(6).EventEmitter,o=n(0);o(r,a),r.Readable=n(21),r.Writable=n(101),r.Duplex=n(102),r.Transform=n(103),r.PassThrough=n(104),r.Stream=r,r.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&l.pause&&l.pause()}function r(){l.readable&&l.resume&&l.resume()}function o(){p||(p=!0,e.end())}function s(){p||(p=!0,'function'==typeof e.destroy&&e.destroy())}function i(e){if(d(),0===a.listenerCount(this,'error'))throw e}function d(){l.removeListener('data',n),e.removeListener('drain',r),l.removeListener('end',o),l.removeListener('close',s),l.removeListener('error',i),e.removeListener('error',i),l.removeListener('end',d),l.removeListener('close',d),e.removeListener('close',d)}var l=this;l.on('data',n),e.on('drain',r),e._isStdio||t&&!1===t.end||(l.on('end',o),l.on('close',s));var p=!1;return l.on('error',i),e.on('error',i),l.on('end',d),l.on('close',d),e.on('close',d),e.emit('pipe',l),e}},function(e,n,r){'use strict';(function(n,a){function o(e){return j.from(e)}function s(e){return j.isBuffer(e)||e instanceof F}function i(e,t,n){return'function'==typeof e.prependListener?e.prependListener(t,n):void(e._events&&e._events[t]?D(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n))}function d(e,n){P=P||r(7),e=e||{};var a=n instanceof P;this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var o=e.highWaterMark,s=e.readableHighWaterMark,i=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:a&&(s||0===s)?s:i,this.highWaterMark=t(this.highWaterMark),this.buffer=new q,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||'utf8',this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(!z&&(z=r(15).StringDecoder),this.decoder=new z(e.encoding),this.encoding=e.encoding)}function l(e){return P=P||r(7),this instanceof l?void(this._readableState=new d(e,this),this.readable=!0,e&&('function'==typeof e.read&&(this._read=e.read),'function'==typeof e.destroy&&(this._destroy=e.destroy)),B.call(this)):new l(e)}function p(e,t,n,r,a){var s=e._readableState;if(null===t)s.reading=!1,_(e,s);else{var i;a||(i=c(s,t)),i?e.emit('error',i):s.objectMode||t&&0<t.length?('string'!=typeof t&&!s.objectMode&&Object.getPrototypeOf(t)!==j.prototype&&(t=o(t)),r?s.endEmitted?e.emit('error',new Error('stream.unshift() after end event')):u(e,s,t,!0):s.ended?e.emit('error',new Error('stream.push() after EOF')):(s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?u(e,s,t,!1):b(e,s)):u(e,s,t,!1))):!r&&(s.reading=!1)}return f(s)}function u(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit('data',n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&m(e)),b(e,t)}function c(e,t){var n;return s(t)||'string'==typeof t||void 0===t||e.objectMode||(n=new TypeError('Invalid non-string/buffer chunk')),n}function f(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function g(e){return e>=Q?e=Q:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function h(e,t){return 0>=e||0===t.length&&t.ended?0:t.objectMode?1:e===e?(e>t.highWaterMark&&(t.highWaterMark=g(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0)):t.flowing&&t.length?t.buffer.head.data.length:t.length}function _(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,m(e)}}function m(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(Y('emitReadable',t.flowing),t.emittedReadable=!0,t.sync?v.nextTick(y,e):y(e))}function y(e){Y('emit readable'),e.emit('readable'),R(e)}function b(e,t){t.readingMore||(t.readingMore=!0,v.nextTick(E,e,t))}function E(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(Y('maybeReadMore read 0'),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function S(e){return function(){var t=e._readableState;Y('pipeOnDrain',t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&U(e,'data')&&(t.flowing=!0,R(e))}}function T(e){Y('readable nexttick read 0'),e.read(0)}function O(e,t){t.resumeScheduled||(t.resumeScheduled=!0,v.nextTick(x,e,t))}function x(e,t){t.reading||(Y('resume read 0'),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit('resume'),R(e),t.flowing&&!t.reading&&e.read(0)}function R(e){var t=e._readableState;for(Y('flow',t.flowing);t.flowing&&null!==e.read(););}function k(e,t){if(0===t.length)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(''):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=w(e,t.buffer,t.decoder),r}function w(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?r=t.shift():r=n?M(e,t):A(e,t),r}function M(e,t){var n=t.head,r=1,a=n.data;for(e-=a.length;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(a+=s===o.length?o:o.slice(0,e),e-=s,0===e){s===o.length?(++r,t.head=n.next?n.next:t.tail=null):(t.head=n,n.data=o.slice(s));break}++r}return t.length-=r,a}function A(e,t){var n=j.allocUnsafe(e),r=t.head,a=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,s),e-=s,0===e){s===o.length?(++a,t.head=r.next?r.next:t.tail=null):(t.head=r,r.data=o.slice(s));break}++a}return t.length-=a,n}function N(e){var t=e._readableState;if(0<t.length)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,v.nextTick(I,t,e))}function I(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit('end'))}function C(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var v=r(13);e.exports=l;var D=r(40),P;l.ReadableState=d;var L=r(6).EventEmitter,U=function(e,t){return e.listeners(t).length},B=r(43),j=r(14).Buffer,F=n.Uint8Array||function(){},H=r(3);H.inherits=r(0);var W=r(95),Y=void 0;Y=W&&W.debuglog?W.debuglog('stream'):function(){};var q=r(96),V=r(44),z;H.inherits(l,B);var G=['error','close','destroy','pause','resume'];Object.defineProperty(l.prototype,'destroyed',{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),l.prototype.destroy=V.destroy,l.prototype._undestroy=V.undestroy,l.prototype._destroy=function(e,t){this.push(null),t(e)},l.prototype.push=function(e,t){var n=this._readableState,r;return n.objectMode?r=!0:'string'==typeof e&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=j.from(e,t),t=''),r=!0),p(this,e,t,!1,r)},l.prototype.unshift=function(e){return p(this,e,null,!0,!1)},l.prototype.isPaused=function(){return!1===this._readableState.flowing},l.prototype.setEncoding=function(e){return z||(z=r(15).StringDecoder),this._readableState.decoder=new z(e),this._readableState.encoding=e,this};var Q=8388608;l.prototype.read=function(e){Y('read',e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return Y('read: emitReadable',t.length,t.ended),0===t.length&&t.ended?N(this):m(this),null;if(e=h(e,t),0===e&&t.ended)return 0===t.length&&N(this),null;var r=t.needReadable;Y('need readable',r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,Y('length less than watermark',r)),t.ended||t.reading?(r=!1,Y('reading or ended',r)):r&&(Y('do read'),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,!t.reading&&(e=h(n,t)));var a;return a=0<e?k(e,t):null,null===a?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(!t.ended&&(t.needReadable=!0),n!==e&&t.ended&&N(this)),null!==a&&this.emit('data',a),a},l.prototype._read=function(){this.emit('error',new Error('_read() is not implemented'))},l.prototype.pipe=function(e,t){function n(e,t){Y('onunpipe'),e===c&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,o())}function r(){Y('onend'),e.end()}function o(){Y('cleanup'),e.removeListener('close',l),e.removeListener('finish',p),e.removeListener('drain',_),e.removeListener('error',d),e.removeListener('unpipe',n),c.removeListener('end',r),c.removeListener('end',u),c.removeListener('data',s),m=!0,f.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&_()}function s(t){Y('ondata'),y=!1;var n=e.write(t);!1!==n||y||((1===f.pipesCount&&f.pipes===e||1<f.pipesCount&&-1!==C(f.pipes,e))&&!m&&(Y('false write response, pause',c._readableState.awaitDrain),c._readableState.awaitDrain++,y=!0),c.pause())}function d(t){Y('onerror',t),u(),e.removeListener('error',d),0===U(e,'error')&&e.emit('error',t)}function l(){e.removeListener('finish',p),u()}function p(){Y('onfinish'),e.removeListener('close',l),u()}function u(){Y('unpipe'),c.unpipe(e)}var c=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=e;break;case 1:f.pipes=[f.pipes,e];break;default:f.pipes.push(e);}f.pipesCount+=1,Y('pipe count=%d opts=%j',f.pipesCount,t);var g=(!t||!1!==t.end)&&e!==a.stdout&&e!==a.stderr,h=g?r:u;f.endEmitted?v.nextTick(h):c.once('end',h),e.on('unpipe',n);var _=S(c);e.on('drain',_);var m=!1,y=!1;return c.on('data',s),i(e,'error',d),e.once('close',l),e.once('finish',p),e.emit('pipe',c),f.flowing||(Y('pipe resume'),c.resume()),e},l.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit('unpipe',this,n),this);if(!e){var r=t.pipes,a=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<a;o++)r[o].emit('unpipe',this,n);return this}var s=C(t.pipes,e);return-1===s?this:(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit('unpipe',this,n),this)},l.prototype.on=function(e,t){var n=B.prototype.on.call(this,e,t);if('data'===e)!1!==this._readableState.flowing&&this.resume();else if('readable'===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&m(this):v.nextTick(T,this))}return n},l.prototype.addListener=l.prototype.on,l.prototype.resume=function(){var e=this._readableState;return e.flowing||(Y('resume'),e.flowing=!0,O(this,e)),this},l.prototype.pause=function(){return Y('call pause flowing=%j',this._readableState.flowing),!1!==this._readableState.flowing&&(Y('pause'),this._readableState.flowing=!1,this.emit('pause')),this},l.prototype.wrap=function(e){var t=this,r=this._readableState,a=!1;for(var o in e.on('end',function(){if(Y('wrapped end'),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on('data',function(n){if((Y('wrapped data'),r.decoder&&(n=r.decoder.write(n)),!(r.objectMode&&(null===n||void 0===n)))&&(r.objectMode||n&&n.length)){var o=t.push(n);o||(a=!0,e.pause())}}),e)void 0===this[o]&&'function'==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var s=0;s<G.length;s++)e.on(G[s],this.emit.bind(this,G[s]));return this._read=function(t){Y('wrapped _read',t),a&&(a=!1,e.resume())},this},Object.defineProperty(l.prototype,'readableHighWaterMark',{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),l._fromList=k}).call(n,r(2),r(1))},function(e,t,n){e.exports=n(6).EventEmitter},function(e,t,n){'use strict';function r(e,t){e.emit('error',t)}var a=n(13);e.exports={destroy:function(e,t){var n=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(t?t(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&a.nextTick(r,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(a.nextTick(r,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){(function(e){function r(e,t){this._id=e,this._clearFn=t}var a='undefined'!=typeof e&&e||'undefined'!=typeof self&&self||window,o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,a,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,a,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(a,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(98),t.setImmediate='undefined'!=typeof self&&self.setImmediate||'undefined'!=typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate='undefined'!=typeof self&&self.clearImmediate||'undefined'!=typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(t,n(2))},function(e,t,n){'use strict';function r(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit('error',new Error('write callback called multiple times'));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function a(e){return this instanceof a?void(i.call(this,e),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&('function'==typeof e.transform&&(this._transform=e.transform),'function'==typeof e.flush&&(this._flush=e.flush)),this.on('prefinish',o)):new a(e)}function o(){var e=this;'function'==typeof this._flush?this._flush(function(t,n){s(e,t,n)}):s(this,null,null)}function s(e,t,n){if(t)return e.emit('error',t);if(null!=n&&e.push(n),e._writableState.length)throw new Error('Calling transform done when ws.length != 0');if(e._transformState.transforming)throw new Error('Calling transform done when still transforming');return e.push(null)}e.exports=a;var i=n(7),d=n(3);d.inherits=n(0),d.inherits(a,i),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,i.prototype.push.call(this,e,t)},a.prototype._transform=function(){throw new Error('_transform() is not implemented')},a.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var a=this._readableState;(r.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},a.prototype._read=function(){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},a.prototype._destroy=function(e,t){var n=this;i.prototype._destroy.call(this,e,function(e){t(e),n.emit('close')})}},function(e,t,n){'use strict';const r=n(110),a=n(111),o=n(112),s=(e,t)=>e.some((e)=>'string'==typeof e?e===t:e.test(t)),i=new o({maxSize:1e5}),d=(e,t)=>{t=Object.assign({deep:!1},t);const n=t.exclude;return r(e,(e,t)=>{if(!(n&&s(n,e)))if(i.has(e))e=i.get(e);else{const t=a(e);100>e.length&&i.set(e,t),e=t}return[e,t]},{deep:t.deep})};e.exports=(e,t)=>Array.isArray(e)?Object.keys(e).map((n)=>d(e[n],t)):d(e,t)},function(e,t,n){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0}),t.mods=t.cheerEvent=t.emoteSets=t.emotes=t.badges=t.broadcasterLanguage=t.userType=t.generalTimestamp=t.generalBoolean=t.generalNumber=t.generalString=void 0;var a=n(23),o=r(a),s=n(18),i=r(s),d=n(49),l=r(d),p=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++)for(var r in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e};t.generalString=(e)=>(0,o.default)(e,/\\s/g,' '),t.generalNumber=(e)=>{const t=parseInt(e,10);return(0,i.default)(t)?t:void 0},t.generalBoolean=(e)=>'1'===e,t.generalTimestamp=(e)=>{const t=new Date(parseInt(e,10));return'Invalid Date'===t.toString()?new Date:t},t.userType=(e)=>'string'==typeof e?e:void 0,t.broadcasterLanguage=(e)=>'string'==typeof e?e:void 0,t.badges=(e)=>'string'==typeof e?e.split(',').reduce((e,t)=>{const[n,r]=t.split('/');return p({},e,{[n]:parseInt(r,10)})},{}):{},t.emotes=(e)=>'string'==typeof e?e.split('/').reduce((e,t)=>{const[n,r]=t.split(':'),[a,o]=r.split('-');return p({},e,{[n]:{start:parseInt(a,10),end:parseInt(o,10)}})},{}):{},t.emoteSets=(e)=>'string'==typeof e?e.split(','):void 0,t.cheerEvent=(e)=>(0,l.default)(e,0)?{event:'CHEER',bits:parseInt(e,10)}:{},t.mods=(e)=>{const[,t]=e.split(': ');return t.split(', ')}},function(e,t,n){var r=n(113),a=n(114),o=a(r);e.exports=o},function(e,t,n){var r=n(4);e.exports=function(e){return r(e).toLowerCase()}},function(e,t,n){'use strict';function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0}),t.clientOptions=t.chatOptions=void 0;var o=n(52),s=a(o),i=n(18),d=a(i),l=n(53),p=a(l),u=n(54),c=a(u),f=n(61),g=a(f),h=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++)for(var r in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},_=n(62),m=a(_),y=n(5),b=r(y),E=n(63),S=r(E);t.chatOptions=(e)=>{const t={username:p.default,token:p.default,connectionTimeout:d.default,joinTimeout:d.default,debug:s.default},n=(0,c.default)({},h({},e,{oauth:S.oauth(e.token)}),{connectionTimeout:b.CONNECTION_TIMEOUT,joinTimeout:b.JOIN_TIMEOUT,debug:!1});return(0,m.default)((0,g.default)(n,t),'[twitch-js/Chat] options: Expected valid options'),n},t.clientOptions=(e)=>{const t={username:p.default,oauth:p.default,server:p.default,port:d.default,ssl:s.default},n=(0,c.default)({},h({},e,{oauth:S.oauth(e.token)}),{server:b.CHAT_SERVER,port:b.CHAT_SERVER_SSL_PORT,ssl:!0});return(0,m.default)((0,g.default)(n,t),'[twitch-js/Chat/Client] options: Expected valid options'),n}},function(e,t,n){var r=n(11),a=n(16);e.exports=function(e){return!0===e||!1===e||a(e)&&r(e)=='[object Boolean]'}},function(e,t,n){var r=n(11),a=n(9),o=n(16);e.exports=function(e){return'string'==typeof e||!a(e)&&o(e)&&r(e)=='[object String]'}},function(e,t,n){var r=n(55),a=n(56),o=n(119),s=n(144),i=a(function(e){return e.push(void 0,o),r(s,void 0,e)});e.exports=i},function(e){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2]);}return e.apply(t,n)}},function(e,t,n){var r=n(116),a=n(117),o=n(118);e.exports=function(e,t){return o(a(e,t,r),e+'')}},function(e,t,n){function r(e,t,n,p,u){e===t||s(t,function(s,l){if(d(s))u||(u=new a),i(e,t,l,n,r,p,u);else{var c=p?p(e[l],s,l+'',e,t,u):void 0;c===void 0&&(c=s),o(e,l,c)}},l)}var a=n(120),o=n(58),s=n(128),i=n(130),d=n(8),l=n(60);e.exports=r},function(e,t,n){function r(e,t,n){(n===void 0||o(e[t],n))&&(n!==void 0||t in e)||a(e,t,n)}var a=n(25),o=n(24);e.exports=r},function(e,t,n){var r=n(20),a=r(Object.getPrototypeOf,Object);e.exports=a},function(e){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){var r=n(147),a=n(148);e.exports=function(e,t){return null==t||r(e,t,a(t))}},function(e,t,n){'use strict';(function(t){e.exports=function(n,r,o,a,s,i,d,e){if('production'!==t.env.NODE_ENV&&void 0===r)throw new Error('invariant requires an error message argument');if(!n){var l;if(void 0===r)l=new Error('Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.');else{var p=[o,a,s,i,d,e],u=0;l=new Error(r.replace(/%s/g,function(){return p[u++]})),l.name='Invariant Violation'}throw l.framesToPop=1,l}}}).call(t,n(1))},function(e,t,n){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0}),t.channel=t.oauth=void 0;var a=n(50),o=r(a),s=n(23),i=r(s);t.oauth=(e='')=>`oauth:${(0,i.default)(e,/oauth:/gi,'')}`,t.channel=(e='')=>`#${(0,i.default)((0,o.default)(e),/^#/g,'')}`},function(e){var t='undefined'!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||'undefined'!=typeof msCrypto&&'function'==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var a=Array(16);e.exports=function(){for(var e=0,t;16>e;e++)0==(3&e)&&(t=4294967296*Math.random()),a[e]=255&t>>>((3&e)<<3);return a}}},function(e){function t(e,t){var r=t||0,a=n;return[a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],'-',a[e[r++]],a[e[r++]],'-',a[e[r++]],a[e[r++]],'-',a[e[r++]],a[e[r++]],'-',a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]]].join('')}for(var n=[],r=0;256>r;++r)n[r]=(r+256).toString(16).substr(1);e.exports=t},function(e,t,n){function r(){this.isAccepted=!1,this.isQueued=!1,this.isStarted=!1,this.isFailed=!1,this.isFinished=!1,this.result=null,this.status='created',this.eta=new s}var a=n(10),o=n(6).EventEmitter,s=n(67);a.inherits(r,o),r.prototype.accept=function(){this.status='accepted',this.isAccepted=!0,this.emit('accepted')},r.prototype.queued=function(){this.status='queued',this.isQueued=!0,this.emit('queued')},r.prototype.unqueued=function(){this.status='accepted',this.isQueued=!1,this.emit('unqueued')},r.prototype.started=function(){this.eta.count=1,this.eta.start(),this.isStarted=!0,this.status='in-progress',this.emit('started')},r.prototype.failed=function(e){this.isFailed=!0,this.isFinished=!0,this.status='failed',this.emit('failed',e)},r.prototype.finish=function(e){this.eta.done=this.eta.count,this.isFinished=!0,this.status='finished',this.result=e,this.emit('finish',this.result)},r.prototype.stopped=function(){this.eta=new s,this.isFinished=!1,this.isStarted=!1,this.status='queued',this.result=null,this.emit('stopped')},r.prototype.progress=function(e){this.eta.done=e.complete,this.eta.count=e.total,this.emit('progress',{complete:this.eta.done,total:this.eta.count,pct:100*(this.eta.done/this.eta.count),eta:this.eta.format('{{etah}}'),message:e.message})},e.exports=r},function(e,n,r){function a(e,t){this.count=e;var n=t&&t.numberFormatter;this.numberFormatter='function'==typeof n?n:i,(t&&t.autoStart||!0===t)&&this.start()}function o(e){return s(1e3*e)}function s(e){function n(e){return 1<e?'s':''}var r=t(e/1e3),a=t(r/31536e3);if(a)return a+' year'+n(a);var o=t((r%=31536e3)/86400);if(o)return o+' day'+n(o);var s=t((r%=86400)/3600);if(s)return s+' hour'+n(s);var i=t((r%=3600)/60);if(i)return i+' minute'+n(i);var d=r%60;return d?d+' second'+n(d):'less than a second'}function i(e){return e.toPrecision(4)}var d=r(10);e.exports=a,a.prototype.start=function(){this.done=0,this.startedAt=new Date},a.prototype.iterate=function(e){this.done++,e&&(this.last=d.format.apply(this,arguments))},a.prototype.format=function(){var e=d.format.apply(this,arguments),t=(new Date-this.startedAt)/1e3,n=this.done/t,r=this.count/n,a=this.done/this.count,s=r-t,i=o(s),l={elapsed:t,rate:n,estimated:r,progress:a,eta:s,etah:i,last:this.last};return e.replace(/{{\S+?}}/g,function(e){var t=e.slice(2,e.length-2),n=l[t]||'';return'number'==typeof n?n.toPrecision(4):n})}},function(e){var t=/[\u200d\ud800-\udfff\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff\ufe0e\ufe0f]/;e.exports=function(e){return t.test(e)}},function(e){'use strict';var t=Object.prototype.hasOwnProperty,n=function(){for(var e=[],t=0;256>t;++t)e.push('%'+((16>t?'0':'')+t.toString(16)).toUpperCase());return e}(),r=function(e){for(var t,n;e.length;)if(n=e.pop(),t=n.obj[n.prop],Array.isArray(t)){for(var r=[],a=0;a<t.length;++a)'undefined'!=typeof t[a]&&r.push(t[a]);n.obj[n.prop]=r}return t},a=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)'undefined'!=typeof e[r]&&(n[r]=e[r]);return n};e.exports={arrayToObject:a,assign:function(e,t){return Object.keys(t).reduce(function(e,n){return e[n]=t[n],e},e)},compact:function(e){for(var t=[{obj:{o:e},prop:'o'}],n=[],a=0;a<t.length;++a)for(var o=t[a],s=o.obj[o.prop],i=Object.keys(s),d=0;d<i.length;++d){var l=i[d],p=s[l];'object'==typeof p&&null!==p&&-1===n.indexOf(p)&&(t.push({obj:s,prop:l}),n.push(p))}return r(t)},decode:function(e){try{return decodeURIComponent(e.replace(/\+/g,' '))}catch(t){return e}},encode:function(e){if(0===e.length)return e;for(var t='string'==typeof e?e:e+'',r='',a=0,o;a<t.length;++a){if(o=t.charCodeAt(a),45===o||46===o||95===o||126===o||48<=o&&57>=o||65<=o&&90>=o||97<=o&&122>=o){r+=t.charAt(a);continue}if(128>o){r+=n[o];continue}if(2048>o){r+=n[192|o>>6]+n[128|63&o];continue}if(55296>o||57344<=o){r+=n[224|o>>12]+n[128|63&o>>6]+n[128|63&o];continue}a+=1,o=65536+((1023&o)<<10|1023&t.charCodeAt(a)),r+=n[240|o>>18]+n[128|63&o>>12]+n[128|63&o>>6]+n[128|63&o]}return r},isBuffer:function(e){return null!==e&&'undefined'!=typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return'[object RegExp]'===Object.prototype.toString.call(e)},merge:function e(n,r,o){if(!r)return n;if('object'!=typeof r){if(Array.isArray(n))n.push(r);else if('object'==typeof n)(o.plainObjects||o.allowPrototypes||!t.call(Object.prototype,r))&&(n[r]=!0);else return[n,r];return n}if('object'!=typeof n)return[n].concat(r);var s=n;return Array.isArray(n)&&!Array.isArray(r)&&(s=a(n,o)),Array.isArray(n)&&Array.isArray(r)?(r.forEach(function(r,a){t.call(n,a)?n[a]&&'object'==typeof n[a]?n[a]=e(n[a],r,o):n.push(r):n[a]=r}),n):Object.keys(r).reduce(function(n,a){var s=r[a];return n[a]=t.call(n,a)?e(n[a],s,o):s,n},s)}}},function(e){'use strict';var t=String.prototype.replace,n=/%20/g;e.exports={default:'RFC3986',formatters:{RFC1738:function(e){return t.call(e,n,'+')},RFC3986:function(e){return e}},RFC1738:'RFC1738',RFC3986:'RFC3986'}},function(e,t,n){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0}),t.ChatConstants=t.Chat=void 0;var a=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++)for(var r in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},o=n(72),s=r(o),i=n(176),d=r(i);t.Chat=s.default,t.ChatConstants=o.constants,t.default=class{constructor({token:e,username:t,chat:n,api:r}){this.chat=new s.default(a({},n,{token:e,username:t})),this.chatConstants=o.constants,this.api=new d.default(a({},r,{token:e,username:t}))}}},function(e,t,n){'use strict';function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e){const t=E.channel(e.channel),n=(0,i.default)(this.channels,[t,'userState','displayName'],''),r=(0,i.default)(e,'state.displayName'),a=d({},e,{isSelf:n===r});switch(a.command){case h.EVENTS.JOIN:{const e=y.joinOrPartMessage(a);this.emit(`${e.command}/${t}`,e);break}case h.EVENTS.PART:{const e=y.joinOrPartMessage(a);this.channels[e.channel]=void 0,this.emit(`${e.command}/${t}`,e);break}case h.EVENTS.NAMES:{const e=y.namesMessage(a);this.emit(`${e.command}/${t}`,e);break}case h.EVENTS.NAMES_END:{const e=y.namesEndMessage(a);this.emit(`${e.command}/${t}`,e);break}case h.EVENTS.CLEAR_CHAT:{const e=y.clearChatMessage(a),n=e.event?`${e.command}/${e.event}/${t}`:`${e.command}/${t}`;this.emit(n,e);break}case h.EVENTS.HOST_TARGET:{const e=y.hostTargetMessage(a);this.emit(`${e.command}/${t}`,e);break}case h.EVENTS.MODE:{const e=y.modeMessage(a);e.username===this.userState.username&&(this.channels[e.channel].userState.isModerator=e.isModerator),this.emit(`${e.command}/${t}`,e);break}case h.EVENTS.GLOBAL_USER_STATE:{const e=y.globalUserStateMessage(a);this.userState=e.tags,this.emit(e.command,e);break}case h.EVENTS.USER_STATE:{const e=y.userStateMessage(a);this.channels=d({},this.channels,{[t]:d({},this.channels[t],{userState:e.userState})}),this.emit(`${e.command}/${t}`,e);break}case h.EVENTS.ROOM_STATE:{const e=y.roomStateMessage(a);this.channels=d({},this.channels,{[t]:d({},this.channels[t],{roomState:e.roomState})}),this.emit(`${e.command}/${t}`,e);break}case h.EVENTS.NOTICE:{const e=y.noticeMessage(a);this.emit(`${e.command}/${e.event}/${t}`,e);break}case h.EVENTS.USER_NOTICE:{const e=y.userNoticeMessage(a);this.emit(`${e.command}/${e.event}/${t}`,e);break}case h.EVENTS.PRIVATE_MESSAGE:{const e=y.privateMessage(a);this.emit(`${e.command}/${t}`,e);break}default:{const e='#'===t?a.command:`${a.command}/${t}`;this.emit(e,a)}}}Object.defineProperty(t,'__esModule',{value:!0}),t.constants=void 0;var s=n(26),i=a(s),d=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++)for(var r in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},l=n(28),p=n(29),u=r(p),c=n(79),f=a(c),g=n(5),h=r(g),_=n(159),m=n(31),y=r(m),b=n(63),E=r(b),S=n(51),T=r(S);class O extends l.EventEmitter{constructor(e){super(),this.readyState=0,this.userState={},this.channels={},this.options=T.chatOptions(e)}connect(){const e=new Promise((e)=>{if(1===this.readyState)this.once(h.EVENTS.GLOBAL_USER_STATE,(t)=>{e(t)});else if(2===this.readyState)e(this.userState);else{this.readyState=1;const t=new f.default(this.options);t.once(h.EVENTS.CONNECTED,(n)=>{this.readyState=2,Object.assign(this,_.commandsFactory.call(this)),this.send=this.send.bind(this,t),this.disconnect=this.disconnect.bind(this,t),t.on(h.EVENTS.ALL,o,this),t.once(h.EVENTS.DISCONNECTED,this.disconnect),o.call(this,n),e(n)})}});return Promise.race([u.delayReject(this.options.connectionTimeout,h.ERROR_CONNECT_TIMED_OUT),e])}send(e,t){e.send(t)}disconnect(e){this.readyState=3,e.removeAllListeners(),this.userState={},this.channels={},this.readyState=4}join(e){const t=E.channel(e),n=u.onceResolve(this,`${h.COMMANDS.ROOM_STATE}/${t}`),r=u.onceResolve(this,`${h.COMMANDS.USER_STATE}/${t}`),a=Promise.all([this.connect,n,r]).then(([,{channel:e,tags:t},{tags:n}])=>{const r={roomState:t,userState:n};return this.channels[e]=r,r});return this.send(`${h.COMMANDS.JOIN} ${t}`),Promise.race([u.delayReject(this.options.joinTimeout,h.ERROR_JOIN_TIMED_OUT),a])}part(e){const t=E.channel(e);this.channels[t]=void 0,this.send(`${h.COMMANDS.PART} ${t}`)}say(e,t){const n=E.channel(e),r=u.onceResolve(this,`${h.COMMANDS.USER_STATE}/${n}`),a=Promise.all([this.connect,r]);return this.send(`${h.COMMANDS.PRIVATE_MESSAGE} ${n} :${t}`),Promise.race([u.delayReject(this.options.joinTimeout,h.ERROR_SAY_TIMED_OUT),a])}broadcast(e){return Promise.all(Object.keys(this.channels).map((t)=>this.say(t,e)))}emit(e,t){e.split('/').reduce((e,n)=>{const r=[...e,n];return super.emit(r.join('/'),t),r},[]),super.emit(h.EVENTS.ALL,t)}}t.constants=h,t.default=O},function(e,t,n){var r=n(74),a=n(78);e.exports=function(e,t){t=r(t,e);for(var n=0,o=t.length;null!=e&&n<o;)e=e[a(t[n++])];return n&&n==o?e:void 0}},function(e,t,n){var r=n(9),a=n(75),o=n(76),s=n(4);e.exports=function(e,t){return r(e)?e:a(e,t)?[e]:o(s(e))}},function(e,t,n){function r(e,t){if(a(e))return!1;var n=typeof e;return!!('number'==n||'symbol'==n||'boolean'==n||null==e||o(e))||i.test(e)||!s.test(e)||null!=t&&e in Object(t)}var a=n(9),o=n(27),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;e.exports=r},function(e,t,n){var r=n(77),a=/^\./,o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,i=r(function(e){var t=[];return a.test(e)&&t.push(''),e.replace(o,function(e,n,r,a){t.push(r?a.replace(s,'$1'):n||e)}),t});e.exports=i},function(e){e.exports=function(e){return e}},function(e){e.exports=function(e){return e}},function(e,t,n){'use strict';function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function s(e){this.send('CAP REQ :twitch.tv/tags twitch.tv/commands twitch.tv/membership',{priority:x}),this.send(`PASS ${e.oauth}`,{priority:x}),this.send(`NICK ${e.username}`,{priority:x})}function i(e){const t=e.data;try{const e=(0,m.default)(t);e.forEach((e)=>{e.command===h.COMMANDS.PING&&this.send('PONG :tmi.twitch.tv',{priority:x}),e.command===h.COMMANDS.GLOBAL_USER_STATE&&this.emit(h.EVENTS.CONNECTED,p({},e,{command:h.EVENTS.CONNECTED})),this.emit(h.EVENTS.ALL,e)})}catch(e){const n={_raw:t,timestamp:new Date,event:h.EVENTS.PARSE_ERROR_ENCOUNTERED,message:e};throw this.emit(h.EVENTS.PARSE_ERROR_ENCOUNTERED,n),new Error(e)}finally{const e={_raw:t,timestamp:new Date,event:h.EVENTS.RAW};this.emit(h.EVENTS.RAW,e)}}function d(e){const t={timestamp:new Date,event:h.EVENTS.ERROR_ENCOUNTERED,message:e};this.emit(h.EVENTS.ALL,t),this.emit(h.EVENTS.ERROR_ENCOUNTERED,t)}function l(){const e={timestamp:new Date,event:h.EVENTS.DISCONNECTED};this.emit(h.EVENTS.DISCONNECTED,e)}Object.defineProperty(t,'__esModule',{value:!0});var p=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++)for(var r in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},u=n(28),c=n(80),f=a(c),g=n(5),h=r(g),_=n(31),m=a(_),y=n(51),b=r(y),E=n(149),S=r(E),T=n(150),O=a(T);const x=h.CLIENT_PRIORITY;class R extends u.EventEmitter{constructor(e={}){super();const t=b.clientOptions(e),n=t.ssl?'wss':'ws',r=new f.default(`${n}://${t.server}:${t.port}`);r.onopen=s.bind(this,t),r.onmessage=i.bind(this),r.onerror=d.bind(this),r.onclose=l.bind(this);const a=new O.default;this.readyState=r.readyState,this.send=this.send.bind({ws:r,queue:a}),this.disconnect=this.disconnect.bind({ws:r})}send(e,t={}){let{priority:n}=t,r=o(t,['priority']);const a=this.ws.send.bind(this.ws,e);this.queue.push({fn:a,priority:n,weight:S.getMessageQueueWeight(r)})}disconnect(){this.ws.close()}}t.default=R},function(e,t,n){'use strict';var r;try{r=n(30)}catch(t){r=n(30)}e.exports=r},function(e,t,n){var r=n(4);e.exports=function(e){return r(e).toUpperCase()}},function(e,t,n){(function(t){var n='object'==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(2))},function(e,t,n){var r=n(84),a=n(85),o=n(33),s=n(9),i=n(34),d=n(36),l=n(37),p=n(38),u=Object.prototype,c=u.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(i(e)&&(s(e)||'string'==typeof e||'function'==typeof e.splice||d(e)||p(e)||o(e)))return!e.length;var t=a(e);if(t=='[object Map]'||t=='[object Set]')return!e.size;if(l(e))return!r(e).length;for(var n in e)if(c.call(e,n))return!1;return!0}},function(e,t,n){var r=n(20),a=r(Object.keys,Object);e.exports=a},function(e){var t=Object.prototype,n=t.toString;e.exports=function(e){return n.call(e)}},function(e){e.exports=function(e){return'number'==typeof e&&-1<e&&0==e%1&&e<=9007199254740991}},function(e,t,n){var r=n(88),a=n(108),o=n(109),s=function(e){var t={raw:e,tags:{},prefix:null,command:null,params:[]},n=0,r=0;if(64===e.charCodeAt(0)){var r=e.indexOf(' ');if(-1===r)return null;for(var a=e.slice(1,r).split(';'),o=0;o<a.length;o++){var s=a[o],i=s.split('=');t.tags[i[0]]=i[1]||!0}n=r+1}for(;32===e.charCodeAt(n);)n++;if(58===e.charCodeAt(n)){if(r=e.indexOf(' ',n),-1===r)return null;for(t.prefix=e.slice(n+1,r),n=r+1;32===e.charCodeAt(n);)n++}if(r=e.indexOf(' ',n),-1===r)return e.length>n?(t.command=e.slice(n),t):null;for(t.command=e.slice(n,r),n=r+1;32===e.charCodeAt(n);)n++;for(;n<e.length;){if(r=e.indexOf(' ',n),58===e.charCodeAt(n)){t.params.push(e.slice(n+1));break}if(-1!==r){for(t.params.push(e.slice(n,r)),n=r+1;32===e.charCodeAt(n);)n++;continue}if(-1===r){t.params.push(e.slice(n));break}}return t};e.exports={parse:s,createStream:function(e){var e=e||{},t=e.convertTimestamps||!1,n=e.parsePrefix||!1,d='',i=r.obj(function(e,r,l){d+=e.toString(),messages=d.split(/\r\n/),d=messages.pop();for(var p=0;p<messages.length;p++){var i=messages[p],u=s(i);if(null===u){this.emit('error',new Error('Invalid IRC message'));continue}var c=u.tags.time;if(c&&t){var f=o.toDate(c);u.tags.time=f?f:new Date(NaN)}n&&(u.prefix=a(u.prefix)),this.push(u)}l()});return i}}},function(e,t,n){(function(t){function r(e){s.call(this,e),this._destroyed=!1}function a(e,t,n){n(null,e)}function o(e){return function(t,n,r){return'function'==typeof t&&(r=n,n=t,t={}),'function'!=typeof n&&(n=a),'function'!=typeof r&&(r=null),e(t,n,r)}}var s=n(89),i=n(10).inherits,d=n(107);i(r,s),r.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var n=this;t.nextTick(function(){e&&n.emit('error',e),n.emit('close')})}},e.exports=o(function(e,t,n){var a=new r(e);return a._transform=t,n&&(a._flush=n),a}),e.exports.ctor=o(function(e,t,n){function a(t){return this instanceof a?void(this.options=d(e,t),r.call(this,this.options)):new a(t)}return i(a,r),a.prototype._transform=t,n&&(a.prototype._flush=n),a}),e.exports.obj=o(function(e,t,n){var a=new r(d({objectMode:!0,highWaterMark:16},e));return a._transform=t,n&&(a._flush=n),a})}).call(t,n(1))},function(e,t,n){e.exports=n(90)},function(e,t,n){function r(e,t){this.afterTransform=function(e,n){return a(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function a(e,t,n){var r=e._transformState;r.transforming=!1;var a=r.writecb;if(!a)return e.emit('error',new Error('no writecb in Transform class'));r.writechunk=null,r.writecb=null,null!==n&&n!==void 0&&e.push(n),a&&a(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);i.call(this,e);var t=this._transformState=new r(e,this),n=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once('finish',function(){'function'==typeof this._flush?this._flush(function(e){s(n,e)}):s(n)})}function s(e,t){if(t)return e.emit('error',t);var n=e._writableState,r=e._readableState,a=e._transformState;if(n.length)throw new Error('calling transform done when ws.length != 0');if(a.transforming)throw new Error('calling transform done when still transforming');return e.push(null)}e.exports=o;var i=n(39),d=n(3);d.inherits=n(0),d.inherits(o,i),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,i.prototype.push.call(this,e,t)},o.prototype._transform=function(){throw new Error('not implemented')},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var a=this._readableState;(r.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},o.prototype._read=function(){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},function(e,t){'use strict';function n(e){var t=e.length;if(0<t%4)throw new Error('Invalid string. Length must be a multiple of 4');var n=e.indexOf('=');-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function r(e,t,n){return 3*(t+n)/4-n}function a(e){for(var t=n(e),a=t[0],o=t[1],s=new u(r(e,a,o)),d=0,l=0<o?a-4:a,c=0,i;c<l;c+=4)i=p[e.charCodeAt(c)]<<18|p[e.charCodeAt(c+1)]<<12|p[e.charCodeAt(c+2)]<<6|p[e.charCodeAt(c+3)],s[d++]=255&i>>16,s[d++]=255&i>>8,s[d++]=255&i;return 2===o&&(i=p[e.charCodeAt(c)]<<2|p[e.charCodeAt(c+1)]>>4,s[d++]=255&i),1===o&&(i=p[e.charCodeAt(c)]<<10|p[e.charCodeAt(c+1)]<<4|p[e.charCodeAt(c+2)]>>2,s[d++]=255&i>>8,s[d++]=255&i),s}function o(e){return l[63&e>>18]+l[63&e>>12]+l[63&e>>6]+l[63&e]}function s(e,t,n){for(var r=[],a=t,s;a<n;a+=3)s=(16711680&e[a]<<16)+(65280&e[a+1]<<8)+(255&e[a+2]),r.push(o(s));return r.join('')}function d(e){for(var t=e.length,n=t%3,r=[],a=16383,o=0,i=t-n,d;o<i;o+=a)r.push(s(e,o,o+a>i?i:o+a));return 1==n?(d=e[t-1],r.push(l[d>>2]+l[63&d<<4]+'==')):2==n&&(d=(e[t-2]<<8)+e[t-1],r.push(l[d>>10]+l[63&d>>4]+l[63&d<<2]+'=')),r.join('')}t.byteLength=function(e){var t=n(e),r=t[0],a=t[1];return 3*(r+a)/4-a},t.toByteArray=a,t.fromByteArray=d;for(var l=[],p=[],u='undefined'==typeof Uint8Array?Array:Uint8Array,c='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',f=0,i=c.length;f<i;++f)l[f]=c[f],p[c.charCodeAt(f)]=f;p[45]=62,p[95]=63},function(e,r){r.read=function(t,r,a,o,l){var p=8*l-o-1,u=(1<<p)-1,c=u>>1,f=-7,g=a?l-1:0,i=a?-1:1,d=t[r+g],s,e;for(g+=i,s=d&(1<<-f)-1,d>>=-f,f+=p;0<f;s=256*s+t[r+g],g+=i,f-=8);for(e=s&(1<<-f)-1,s>>=-f,f+=o;0<f;e=256*e+t[r+g],g+=i,f-=8);if(0===s)s=1-c;else{if(s===u)return e?NaN:(d?-1:1)*Infinity;e+=n(2,o),s-=c}return(d?-1:1)*e*n(2,s-o)},r.write=function(r,a,o,l,p,u){var f=8*u-p-1,g=(1<<f)-1,h=g>>1,_=23===p?5.960464477539063e-8-6.617444900424222e-24:0,y=l?0:u-1,i=l?1:-1,d=0>a||0===a&&0>1/a?1:0,s,b,m;for(a=Math.abs(a),isNaN(a)||a===Infinity?(b=isNaN(a)?1:0,s=g):(s=t(Math.log(a)/Math.LN2),1>a*(m=n(2,-s))&&(s--,m*=2),a+=1<=s+h?_/m:_*n(2,1-h),2<=a*m&&(s++,m/=2),s+h>=g?(b=0,s=g):1<=s+h?(b=(a*m-1)*n(2,p),s+=h):(b=a*n(2,h-1)*n(2,p),s=0));8<=p;r[o+y]=255&b,y+=i,b/=256,p-=8);for(s=s<<p|b,f+=p;0<f;r[o+y]=255&s,y+=i,s/=256,f-=8);r[o+y-i]|=128*d}},function(e,t,n){(function(t){function r(e){e=e||{};var t=e.highWaterMark;this.highWaterMark=t||0===t?t:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,this.defaultEncoding=e.defaultEncoding||'utf8',this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(!A&&(A=n(15).StringDecoder),this.decoder=new A(e.encoding),this.encoding=e.encoding)}function a(e){return this instanceof a?void(this._readableState=new r(e,this),this.readable=!0,w.call(this)):new a(e)}function s(t,n,r,a,o){var s=p(n,r);if(s)t.emit('error',s);else if(null===r||r===void 0)n.reading=!1,n.ended||u(t,n);else if(!(n.objectMode||r&&0<r.length))o||(n.reading=!1);else if(n.ended&&!o){var d=new Error('stream.push() after EOF');t.emit('error',d)}else if(n.endEmitted&&o){var d=new Error('stream.unshift() after end event');t.emit('error',d)}else!n.decoder||o||a||(r=n.decoder.write(r)),n.length+=n.objectMode?1:r.length,o?n.buffer.unshift(r):(n.reading=!1,n.buffer.push(r)),n.needReadable&&c(t),g(t,n);return i(n)}function i(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function d(e){if(e>=N)e=N;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}function l(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=d(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function p(e,t){var n=null;return R.isBuffer(t)||'string'==typeof t||null===t||void 0===t||e.objectMode||(n=new TypeError('Invalid non-string/buffer chunk')),n}function u(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,0<t.length?c(e):S(e)}function c(e){var n=e._readableState;n.needReadable=!1;n.emittedReadable||(n.emittedReadable=!0,n.sync?t.nextTick(function(){f(e)}):f(e))}function f(e){e.emit('readable')}function g(e,n){n.readingMore||(n.readingMore=!0,t.nextTick(function(){h(e,n)}))}function h(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function _(e){return function(){var t=this,n=e._readableState;n.awaitDrain--,0===n.awaitDrain&&m(e)}}function m(e){function t(e){var t=e.write(r);!1===t&&n.awaitDrain++}var n=e._readableState,r;for(n.awaitDrain=0;n.pipesCount&&null!==(r=e.read());)if(1===n.pipesCount?t(n.pipes,0,null):T(n.pipes,t),e.emit('data',r),0<n.awaitDrain)return;return 0===n.pipesCount?(n.flowing=!1,void(0<k.listenerCount(e,'data')&&b(e))):void(n.ranOut=!0)}function y(){this._readableState.ranOut&&(this._readableState.ranOut=!1,m(this))}function b(e,n){var r=e._readableState;if(r.flowing)throw new Error('Cannot switch to old mode now.');var a=n||!1,o=!1;e.readable=!0,e.pipe=w.prototype.pipe,e.on=e.addListener=w.prototype.on,e.on('readable',function(){o=!0;for(var t;!a&&null!==(t=e.read());)e.emit('data',t);null===t&&(o=!1,e._readableState.needReadable=!0)}),e.pause=function(){a=!0,this.emit('pause')},e.resume=function(){a=!1,o?t.nextTick(function(){e.emit('readable')}):this.read(0),this.emit('resume')},e.emit('readable')}function E(e,t){var r=t.buffer,a=t.length,s=!!t.decoder,d=!!t.objectMode,p;if(0===r.length)return null;if(0===a)p=null;else if(d)p=r.shift();else if(!e||e>=a)p=s?r.join(''):R.concat(r,a),r.length=0;else if(e<r[0].length){var u=r[0];p=u.slice(0,e),r[0]=u.slice(e)}else if(e===r[0].length)p=r.shift();else{p=s?'':new R(e);for(var f=0,c=0,i=r.length;c<i&&f<e;c++){var u=r[0],l=o(e-f,u.length);s?p+=u.slice(0,l):u.copy(p,f,0,l),l<u.length?r[0]=u.slice(l):r.shift(),f+=l}}return p}function S(e){var n=e._readableState;if(0<n.length)throw new Error('endReadable called on non-empty stream');!n.endEmitted&&n.calledRead&&(n.ended=!0,t.nextTick(function(){n.endEmitted||0!==n.length||(n.endEmitted=!0,e.readable=!1,e.emit('end'))}))}function T(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function O(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}e.exports=a;var x=n(94),R=n(12).Buffer;a.ReadableState=r;var k=n(6).EventEmitter;k.listenerCount||(k.listenerCount=function(e,t){return e.listeners(t).length});var w=n(41),M=n(3);M.inherits=n(0);var A;M.inherits(a,w),a.prototype.push=function(e,t){var n=this._readableState;return'string'!=typeof e||n.objectMode||(t=t||n.defaultEncoding,t!==n.encoding&&(e=new R(e,t),t='')),s(this,n,e,t,!1)},a.prototype.unshift=function(e){var t=this._readableState;return s(this,t,e,'',!0)},a.prototype.setEncoding=function(e){A||(A=n(15).StringDecoder),this._readableState.decoder=new A(e),this._readableState.encoding=e};var N=8388608;a.prototype.read=function(e){var t=this._readableState;t.calledRead=!0;var r=e,a;if(('number'!=typeof e||0<e)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return c(this),null;if(e=l(e,t),0===e&&t.ended)return a=null,0<t.length&&t.decoder&&(a=E(e,t),t.length-=a.length),0===t.length&&S(this),a;var o=t.needReadable;return t.length-e<=t.highWaterMark&&(o=!0),(t.ended||t.reading)&&(o=!1),o&&(t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),o&&!t.reading&&(e=l(r,t)),a=0<e?E(e,t):null,null===a&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),t.ended&&!t.endEmitted&&0===t.length&&S(this),a},a.prototype._read=function(){this.emit('error',new Error('not implemented'))},a.prototype.pipe=function(e,n){function r(e){e!==p||o()}function a(){e.end()}function o(){e.removeListener('close',i),e.removeListener('finish',d),e.removeListener('drain',g),e.removeListener('error',s),e.removeListener('unpipe',r),p.removeListener('end',a),p.removeListener('end',o),(!e._writableState||e._writableState.needDrain)&&g()}function s(t){l(),e.removeListener('error',s),0===k.listenerCount(e,'error')&&e.emit('error',t)}function i(){e.removeListener('finish',d),l()}function d(){e.removeListener('close',i),l()}function l(){p.unpipe(e)}var p=this,u=this._readableState;switch(u.pipesCount){case 0:u.pipes=e;break;case 1:u.pipes=[u.pipes,e];break;default:u.pipes.push(e);}u.pipesCount+=1;var c=(!n||!1!==n.end)&&e!==t.stdout&&e!==t.stderr,f=c?a:o;u.endEmitted?t.nextTick(f):p.once('end',f),e.on('unpipe',r);var g=_(p);return e.on('drain',g),e._events&&e._events.error?x(e._events.error)?e._events.error.unshift(s):e._events.error=[s,e._events.error]:e.on('error',s),e.once('close',i),e.once('finish',d),e.emit('pipe',p),u.flowing||(this.on('readable',y),u.flowing=!0,t.nextTick(function(){m(p)})),e},a.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,this.removeListener('readable',y),t.flowing=!1,e&&e.emit('unpipe',this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,this.removeListener('readable',y),t.flowing=!1;for(var a=0;a<r;a++)n[a].emit('unpipe',this);return this}var a=O(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit('unpipe',this),this)},a.prototype.on=function(e,t){var n=w.prototype.on.call(this,e,t);if('data'!==e||this._readableState.flowing||b(this),'readable'===e&&this.readable){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&c(this,r):this.read(0))}return n},a.prototype.addListener=a.prototype.on,a.prototype.resume=function(){b(this),this.read(0),this.emit('resume')},a.prototype.pause=function(){b(this,!0),this.emit('pause')},a.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;for(var a in e.on('end',function(){if(t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on('data',function(a){if((t.decoder&&(a=t.decoder.write(a)),!(t.objectMode&&(null===a||void 0===a)))&&(t.objectMode||a&&a.length)){var o=r.push(a);o||(n=!0,e.pause())}}),e)'function'==typeof e[a]&&'undefined'==typeof this[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));return T(['error','close','destroy','pause','resume'],function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(){n&&(n=!1,e.resume())},r},a._fromList=E}).call(t,n(1))},function(e){e.exports=Array.isArray||function(e){return'[object Array]'==Object.prototype.toString.call(e)}},function(){},function(e,t,n){'use strict';function r(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}function a(e,t,n){e.copy(t,n)}var o=n(14).Buffer,s=n(97);e.exports=function(){function e(){r(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return'';for(var t=this.head,n=''+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var t=o.allocUnsafe(e>>>0),n=this.head,r=0;n;)a(n.data,t,r),r+=n.data.length,n=n.next;return t},e}(),s&&s.inspect&&s.inspect.custom&&(e.exports.prototype[s.inspect.custom]=function(){var e=s.inspect({length:this.length});return this.constructor.name+' '+e})},function(){},function(e,t,n){(function(e,t){(function(e){'use strict';function n(e){'function'!=typeof e&&(e=new Function(''+e));for(var t=Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return f[c]=r,m(c),c++}function r(e){delete f[e]}function a(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n);}}function o(e){if(g)setTimeout(o,0,e);else{var t=f[e];if(t){g=!0;try{a(t)}finally{r(e),g=!1}}}}function s(){m=function(e){t.nextTick(function(){o(e)})}}function i(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage('','*'),e.onmessage=n,t}}function d(){var t='setImmediate$'+Math.random()+'$',n=function(n){n.source===e&&'string'==typeof n.data&&0===n.data.indexOf(t)&&o(+n.data.slice(t.length))};e.addEventListener?e.addEventListener('message',n,!1):e.attachEvent('onmessage',n),m=function(n){e.postMessage(t+n,'*')}}function l(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;o(t)},m=function(t){e.port2.postMessage(t)}}function p(){var e=h.documentElement;m=function(t){var n=h.createElement('script');n.onreadystatechange=function(){o(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function u(){m=function(e){setTimeout(o,0,e)}}if(!e.setImmediate){var c=1,f={},g=!1,h=e.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(e),m;_=_&&_.setTimeout?_:e,'[object process]'==={}.toString.call(e.process)?s():i()?d():e.MessageChannel?l():h&&'onreadystatechange'in h.createElement('script')?p():u(),_.setImmediate=n,_.clearImmediate=r}})('undefined'==typeof self?'undefined'==typeof e?this:e:self)}).call(t,n(2),n(1))},function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&'true'===(n+'').toLowerCase()}e.exports=function(e,t){function r(){if(!a){if(n('throwDeprecation'))throw new Error(t);else n('traceDeprecation')?console.trace(t):console.warn(t);a=!0}return e.apply(this,arguments)}if(n('noDeprecation'))return e;var a=!1;return r}}).call(t,n(2))},function(e,t,n){'use strict';function r(e){return this instanceof r?void a.call(this,e):new r(e)}e.exports=r;var a=n(46),o=n(3);o.inherits=n(0),o.inherits(r,a),r.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){e.exports=n(22)},function(e,t,n){e.exports=n(7)},function(e,t,n){e.exports=n(21).Transform},function(e,t,n){e.exports=n(21).PassThrough},function(e,t,n){(function(t){function r(e,t,n){this.chunk=e,this.encoding=t,this.callback=n}function a(e,t){e=e||{};var n=e.highWaterMark;this.highWaterMark=n||0===n?n:16384,this.objectMode=!!e.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var r=!1===e.decodeStrings;this.decodeStrings=!r,this.defaultEncoding=e.defaultEncoding||'utf8',this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){f(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function o(e){var t=n(39);return this instanceof o||this instanceof t?void(this._writableState=new a(e,this),this.writable=!0,T.call(this)):new o(e)}function s(e,n,r){var a=new Error('write after end');e.emit('error',a),t.nextTick(function(){r(a)})}function i(e,n,r,a){var o=!0;if(!E.isBuffer(r)&&'string'!=typeof r&&null!==r&&r!==void 0&&!n.objectMode){var s=new TypeError('Invalid non-string/buffer chunk');e.emit('error',s),t.nextTick(function(){a(s)}),o=!1}return o}function d(e,t,n){return e.objectMode||!1===e.decodeStrings||'string'!=typeof t||(t=new E(t,n)),t}function l(e,t,n,a,o){n=d(t,n,a),E.isBuffer(n)&&(a='buffer');var s=t.objectMode?1:n.length;t.length+=s;var i=t.length<t.highWaterMark;return i||(t.needDrain=!0),t.writing?t.buffer.push(new r(n,a,o)):p(e,t,s,n,a,o),i}function p(e,t,n,r,a,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,e._write(r,a,t.onwrite),t.sync=!1}function u(e,n,r,a,o){r?t.nextTick(function(){o(a)}):o(a),e._writableState.errorEmitted=!0,e.emit('error',a)}function c(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function f(e,n){var r=e._writableState,a=r.sync,o=r.writecb;if(c(r),n)u(e,r,a,n,o);else{var s=m(e,r);s||r.bufferProcessing||!r.buffer.length||_(e,r),a?t.nextTick(function(){g(e,r,s,o)}):g(e,r,s,o)}}function g(e,t,n,r){n||h(e,t),r(),n&&y(e,t)}function h(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit('drain'))}function _(e,t){t.bufferProcessing=!0;for(var n=0;n<t.buffer.length;n++){var r=t.buffer[n],a=r.chunk,o=r.encoding,s=r.callback,i=t.objectMode?1:a.length;if(p(e,t,i,a,o,s),t.writing){n++;break}}t.bufferProcessing=!1,n<t.buffer.length?t.buffer=t.buffer.slice(n):t.buffer.length=0}function m(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function y(e,t){var n=m(e,t);return n&&(t.finished=!0,e.emit('finish')),n}function b(e,n,r){n.ending=!0,y(e,n),r&&(n.finished?t.nextTick(r):e.once('finish',r)),n.ended=!0}e.exports=o;var E=n(12).Buffer;o.WritableState=a;var S=n(3);S.inherits=n(0);var T=n(41);S.inherits(o,T),o.prototype.pipe=function(){this.emit('error',new Error('Cannot pipe. Not readable.'))},o.prototype.write=function(e,t,n){var r=this._writableState,a=!1;return'function'==typeof t&&(n=t,t=null),E.isBuffer(e)?t='buffer':!t&&(t=r.defaultEncoding),'function'!=typeof n&&(n=function(){}),r.ended?s(this,r,n):i(this,r,e,n)&&(a=l(this,r,e,t,n)),a},o.prototype._write=function(e,t,n){n(new Error('not implemented'))},o.prototype.end=function(e,t,n){var r=this._writableState;'function'==typeof e?(n=e,e=null,t=null):'function'==typeof t&&(n=t,t=null),'undefined'!=typeof e&&null!==e&&this.write(e,t),r.ending||r.finished||b(this,r,n)}}).call(t,n(1))},function(e){e.exports=function(e){return e&&'object'==typeof e&&'function'==typeof e.copy&&'function'==typeof e.fill&&'function'==typeof e.readUInt8}},function(e){e.exports=function(){for(var e={},n=0,r;n<arguments.length;n++)for(var a in r=arguments[n],r)t.call(r,a)&&(e[a]=r[a]);return e};var t=Object.prototype.hasOwnProperty},function(e){e.exports=function(e){if(!e||0===e.length)return null;var t=e.indexOf('.')+1,n=e.indexOf('!')+1,r=e.indexOf('@',n)+1;if(1===n||1===r)return null;var a={};return a.raw=e,a.isServer=!1,a.nick=null,a.user=null,a.host=null,0<n?(a.nick=e.slice(0,n-1),0<r?(a.user=e.slice(n,r-1),a.host=e.slice(r)):a.user=e.slice(n)):0<r?(a.nick=e.slice(0,r-1),a.host=e.slice(r)):0<t?(a.host=e,a.isServer=!0):a.nick=e,a}},function(e,t){function n(e,t){for(var n=''+e;n.length<t;)n='0'+n;return n}t.toDate=function(e){var t=e.match(/([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?/);if(null===t)return null;var n=0,r=new Date(t[1],0,1);t[3]&&r.setMonth(t[3]-1),t[5]&&r.setDate(t[5]),t[7]&&r.setHours(t[7]),t[8]&&r.setMinutes(t[8]),t[10]&&r.setSeconds(t[10]),t[12]&&r.setMilliseconds(1e3*('0.'+t[12])),t[14]&&(n=60*t[16]+parseInt(t[17],10),n*='-'===t[15]?1:-1),n-=r.getTimezoneOffset();var a=r.getTime()+1e3*(60*n);return new Date(a)},t.fromDate=function(e){var t=e.getUTCFullYear(),r=n(e.getUTCMonth()+1,2),a=n(e.getUTCDate(),2),o=n(e.getUTCHours(),2),s=n(e.getUTCMinutes(),2),i=n(e.getUTCSeconds(),2);return t+'-'+r+'-'+a+'T'+o+':'+s+':'+i+'Z'}},function(e){'use strict';const t=(e)=>'object'==typeof e&&null!==e&&!(e instanceof RegExp)&&!(e instanceof Error)&&!(e instanceof Date);e.exports=function e(n,r,a,o){if(a=Object.assign({deep:!1,target:{}},a),o=o||new WeakMap,o.has(n))return o.get(n);o.set(n,a.target);const s=a.target;delete a.target;for(const i of Object.keys(n)){const d=n[i],l=r(i,d,n);let p=l[1];a.deep&&t(p)&&(Array.isArray(p)?p=p.map((n)=>t(n)?e(n,r,a,o):n):p=e(p,r,a,o)),s[l[0]]=p}return s}},function(e){'use strict';function t(e){let t=!1,n=!1,r=!1;for(let a=0;a<e.length;a++){const o=e[a];t&&/[a-zA-Z]/.test(o)&&o.toUpperCase()===o?(e=e.substr(0,a)+'-'+e.substr(a),t=!1,r=n,n=!0,a++):n&&r&&/[a-zA-Z]/.test(o)&&o.toLowerCase()===o?(e=e.substr(0,a-1)+'-'+e.substr(a-1),r=n,n=!1,t=!0):(t=o.toLowerCase()===o,r=n,n=o.toUpperCase()===o)}return e}e.exports=function(e){if(e=1<arguments.length?Array.from(arguments).map((e)=>e.trim()).filter((e)=>e.length).join('-'):e.trim(),0===e.length)return'';if(1===e.length)return e.toLowerCase();if(/^[a-z0-9]+$/.test(e))return e;const n=e!==e.toLowerCase();return n&&(e=t(e)),e.replace(/^[_.\- ]+/,'').toLowerCase().replace(/[_.\- ]+(\w|$)/g,(e,t)=>t.toUpperCase())}},function(e){'use strict';class t{constructor(e){if(e=Object.assign({},e),!(e.maxSize&&0<e.maxSize))throw new TypeError('`maxSize` must be a number greater than 0');this.maxSize=e.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){const t=this.oldCache.get(e);return this._set(e,t),t}}set(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}delete(e){this.cache.delete(e)&&this._size--,this.oldCache.delete(e)}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const e of this)yield e[0]}*values(){for(const e of this)yield e[1]}*[Symbol.iterator](){for(const e of this.cache)yield e;for(const e of this.oldCache)this.cache.has(e[0])||(yield e)}get size(){let e=0;for(const t of this.oldCache)this.cache.has(t[0])||e++;return this._size+e}}e.exports=t},function(e){e.exports=function(e,t){return e>t}},function(e,t,n){var r=n(32);e.exports=function(e){return function(t,n){return'string'==typeof t&&'string'==typeof n||(t=r(t),n=r(n)),e(t,n)}}},function(e,t,n){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.userState=t.userNotice=t.roomState=t.privateMessage=t.globalUserState=t.clearChat=void 0;var r=n(50),a=function(e){return e&&e.__esModule?e:{default:e}}(r),o=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++)for(var r in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},s=n(48),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s);const d=(e)=>o({},e,{badges:i.badges(e.badges),bits:i.generalNumber(e.bits),emotes:i.emotes(e.emotes),emoteSets:i.emoteSets(e.emoteSets),userType:i.userType(e.userType),isModerator:i.generalBoolean(e.mod),isSubscriber:i.generalBoolean(e.subscriber),isTurboSubscriber:i.generalBoolean(e.turbo)});t.clearChat=(e)=>o({},e,{banReason:i.generalString(e.banReason),banDuration:i.generalNumber(e.banDuration)}),t.globalUserState=(e)=>o({},e,{emoteSets:i.emoteSets(e.emoteSets),userType:i.userType(e.userType),username:(0,a.default)(e.displayName),isTurboSubscriber:i.generalBoolean(e.turbo)}),t.privateMessage=(...e)=>d(...e),t.roomState=(e)=>o({},e,{broadcasterLanguage:i.broadcasterLanguage(e.broadcasterLang),slowDelay:parseInt(e.slow,10),isEmoteOnly:i.generalBoolean(e.emoteOnly),isFollowersOnly:i.generalBoolean(e.followersOnly),isR9kEnabled:i.generalBoolean(e.r9k),isSubscribersOnly:i.generalBoolean(e.subsOnly)}),t.userNotice=(...e)=>d(...e),t.userState=d},function(e){e.exports=function(e){return e}},function(t,n,r){var a=r(55),o=e;t.exports=function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var r=arguments,s=-1,i=o(r.length-t,0),d=Array(i);++s<i;)d[s]=r[t+s];s=-1;for(var l=Array(t+1);++s<t;)l[s]=r[s];return l[t]=n(d),a(e,this,l)}}},function(e){e.exports=function(e){return e}},function(e,t,n){function r(e,t,n,s,i,d){return o(e)&&o(t)&&(d.set(t,e),a(e,t,void 0,r,d),d['delete'](t)),e}var a=n(57),o=n(8);e.exports=r},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var a=n(121),o=n(122),s=n(123),i=n(124),d=n(125);r.prototype.clear=a,r.prototype['delete']=o,r.prototype.get=s,r.prototype.has=i,r.prototype.set=d,e.exports=r},function(e){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(17),a=Array.prototype,o=a.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);if(0>n)return!1;var a=t.length-1;return n==a?t.pop():o.call(t,n,1),--this.size,!0}},function(e,t,n){var r=n(17);e.exports=function(e){var t=this.__data__,n=r(t,e);return 0>n?void 0:t[n][1]}},function(e,t,n){var r=n(17);e.exports=function(e){return-1<r(this.__data__,e)}},function(e,t,n){var r=n(17);e.exports=function(e,t){var n=this.__data__,a=r(n,e);return 0>a?(++this.size,n.push([e,t])):n[a][1]=t,this}},function(e,t,n){var r=n(127),a=function(){try{var e=r(Object,'defineProperty');return e({},'',{}),e}catch(t){}}();e.exports=a},function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(129),a=r();e.exports=a},function(e){e.exports=function(e){return function(t,n,r){for(var a=-1,o=Object(t),s=r(t),i=s.length;i--;){var d=s[e?i:++a];if(!1===n(o[d],d,o))break}return t}}},function(e,t,n){var r=n(58),a=n(131),o=n(133),s=n(136),i=n(137),d=n(33),l=n(9),p=n(139),u=n(36),c=n(35),f=n(8),g=n(140),h=n(38),_=n(141);e.exports=function(e,t,n,m,y,b,E){var S=e[n],T=t[n],O=E.get(T);if(O)return void r(e,n,O);var x=b?b(S,T,n+'',e,t,E):void 0,R=x===void 0;if(R){var k=l(T),w=!k&&u(T),M=!k&&!w&&h(T);x=T,k||w||M?l(S)?x=S:p(S)?x=s(S):w?(R=!1,x=a(T,!0)):M?(R=!1,x=o(T,!0)):x=[]:g(T)||d(T)?(x=S,d(S)?x=_(S):(!f(S)||m&&c(S))&&(x=i(T))):R=!1}R&&(E.set(T,x),y(x,T,m,b,E),E['delete'](T)),r(e,n,x)}},function(e,t,n){(function(e){var r=n(19),a='object'==typeof t&&t&&!t.nodeType&&t,o=a&&'object'==typeof e&&e&&!e.nodeType&&e,s=o&&o.exports===a,i=s?r.Buffer:void 0,d=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=d?d(n):new e.constructor(n);return e.copy(r),r}}).call(t,n(132)(e))},function(e){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],!e.children&&(e.children=[]),Object.defineProperty(e,'loaded',{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,'id',{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){var r=n(134);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){var r=n(135);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},function(e,t,n){var r=n(19),a=r.Uint8Array;e.exports=a},function(e){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t,n){var r=n(138),a=n(59),o=n(37);e.exports=function(e){return'function'!=typeof e.constructor||o(e)?{}:r(a(e))}},function(e,t,n){var r=n(8),a=Object.create,o=function(){function e(){}return function(t){if(!r(t))return{};if(a)return a(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},function(e,t,n){var r=n(34),a=n(16);e.exports=function(e){return a(e)&&r(e)}},function(e,t,n){var r=n(11),a=n(59),o=n(16),s=Function.prototype,i=Object.prototype,d=s.toString,l=i.hasOwnProperty,p=d.call(Object);e.exports=function(e){if(!o(e)||r(e)!='[object Object]')return!1;var t=a(e);if(null===t)return!0;var n=l.call(t,'constructor')&&t.constructor;return'function'==typeof n&&n instanceof n&&d.call(n)==p}},function(e,t,n){var r=n(142),a=n(60);e.exports=function(e){return r(e,a(e))}},function(e,t,n){var r=n(143),a=n(25);e.exports=function(e,t,n,o){var s=!n;n||(n={});for(var i=-1,d=t.length;++i<d;){var l=t[i],p=o?o(n[l],e[l],l,n,e):void 0;p===void 0&&(p=e[l]),s?a(n,l,p):r(n,l,p)}return n}},function(e,t,n){function r(e,t,n){var r=e[t];i.call(e,t)&&o(r,n)&&(n!==void 0||t in e)||a(e,t,n)}var a=n(25),o=n(24),s=Object.prototype,i=s.hasOwnProperty;e.exports=r},function(e,t,n){var r=n(57),a=n(145),o=a(function(e,t,n,a){r(e,t,n,a)});e.exports=o},function(e,t,n){var r=n(56),a=n(146);e.exports=function(e){return r(function(t,n){var r=-1,o=n.length,s=1<o?n[o-1]:void 0,i=2<o?n[2]:void 0;for(s=3<e.length&&'function'==typeof s?(o--,s):void 0,i&&a(n[0],n[1],i)&&(s=3>o?void 0:s,o=1),t=Object(t);++r<o;){var d=n[r];d&&e(t,d,r,s)}return t})}},function(e){e.exports=function(){return!1}},function(e){function t(e,t,n){var r=n.length;if(null==e)return!r;for(e=Object(e);r--;){var a=n[r],o=t[a],s=e[a];if(s===void 0&&!(a in e)||!o(s))return!1}return!0}e.exports=t},function(e,t,n){var r=n(20),a=r(Object.keys,Object);e.exports=a},function(e,t,n){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.getMessageQueueWeight=void 0;var r=n(5),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r);t.getMessageQueueWeight=({isModerator:e=!1,isKnownBot:t=!1,isVerifiedBot:n=!1}={})=>{if(n)return a.RATE_LIMIT_VERIFIED_BOT;return t?a.RATE_LIMIT_KNOWN_BOT:e?a.RATE_LIMIT_MODERATOR:a.RATE_LIMIT_USER}},function(t,n,r){'use strict';function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,'__esModule',{value:!0});var o=r(151),s=a(o),i=r(158),d=a(i),l=r(5),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l);class u extends s.default{constructor(){super(({fn:e},t)=>{e(),t(this.rateLimiter)},{store:new d.default,priority:({priority:e=1},t)=>t(null,e),precondition:(e)=>e(null,1>this.rateLimiter),preconditionRetryTimeout:p.QUEUE_TICK_RATE}),this.rateLimiter=0,this.rateLimiterIntervalId=setInterval(this.burnDownRateLimiter,p.QUEUE_TICK_RATE)}incrementRateLimiter(e){return()=>{this.rateLimiter+=1/e}}burnDownRateLimiter(){this.rateLimiter=e(this.rateLimiter-1,0)}push({fn:e,priority:t,weight:n}){super.push({fn:e,priority:t}).on('accepted',this.incrementRateLimiter(n))}}n.default=u},function(e,t,n){(function(t){function r(e,n){var r=this;if(n=n||{},'object'==typeof e&&(n=e||{}),'function'==typeof e&&(n.process=e),!n.process)throw new Error('Queue has no process function.');if(n=n||{},r.process=n.process||function(e,t){t(null,{})},r.filter=n.filter||function(e,t){t(null,e)},r.merge=n.merge||function(e,t,n){n(null,t)},r.precondition=n.precondition||function(e){e(null,!0)},r.setImmediate=n.setImmediate||t,r.id=n.id||'id',r.priority=n.priority||null,r.cancelIfRunning=void 0!==n.cancelIfRunning&&!!n.cancelIfRunning,r.autoResume=void 0===n.autoResume||!!n.autoResume,r.failTaskOnProcessException=void 0===n.failTaskOnProcessException||!!n.failTaskOnProcessException,r.filo=n.filo||!1,r.batchSize=n.batchSize||1,r.batchDelay=n.batchDelay||0,r.batchDelayTimeout=n.batchDelayTimeout||Infinity,r.afterProcessDelay=n.afterProcessDelay||0,r.concurrent=n.concurrent||1,r.maxTimeout=n.maxTimeout||Infinity,r.maxRetries=n.maxRetries||0,r.retryDelay=n.retryDelay||0,r.storeMaxRetries=n.storeMaxRetries||Infinity,r.storeRetryTimeout=n.storeRetryTimeout||1e3,r.preconditionRetryTimeout=n.preconditionRetryTimeout||1e3,r._queuedPeak=0,r._queuedTime={},r._processedTotalElapsed=0,r._processedAverage=0,r._processedTotal=0,r._failedTotal=0,r.length=0,r._stopped=!1,r._saturated=!1,r._preconditionRetryTimeoutId=null,r._batchTimeoutId=null,r._batchDelayTimeoutId=null,r._connected=!1,r._storeRetries=0,r._hasMore=!1,r._isWriting=!1,r._writeQueue=[],r._writing={},r._tasksWaitingForConnect=[],r._calledDrain=!0,r._calledEmpty=!0,r._fetching=0,r._running=0,r._retries={},r._workers={},r._tickets={},r.use(n.store||'memory'),!r._store)throw new Error('Queue cannot continue without a valid store.')}var a=n(152),o=n(10),s=n(6).EventEmitter,i=n(66),d=n(155),l=n(156);o.inherits(r,s),r.prototype.destroy=function(e){e=e||function(){};var t=this;t._hasMore=!1,t._isWriting=!1,t._writeQueue=[],t._writing={},t._tasksWaitingForConnect=[],t._tickets={},t._workers={},t._fetching=0,t._running={},t._retries={},t._calledEmpty=!0,t._calledDrain=!0,t._connected=!1,t.pause(),'function'==typeof t._store.close?t._store.close(e):e()},r.prototype.resetStats=function(){this._queuedPeak=0,this._processedTotalElapsed=0,this._processedAverage=0,this._processedTotal=0,this._failedTotal=0},r.prototype.getStats=function(){var e=0===this._processedTotal?0:1-this._failedTotal/this._processedTotal;return{successRate:e,peak:this._queuedPeak,average:this._processedAverage,total:this._processedTotal}},r.prototype.use=function(e,t){var n=this,r=function(e){var t;try{t=!function(){var t=new Error('Cannot find module "."');throw t.code='MODULE_NOT_FOUND',t}()}catch(t){throw new Error('Attempting to require better-queue-'+e+', but failed.\nPlease ensure you have this store installed via npm install --save better-queue-'+e)}return t};if('string'==typeof e){var a=r(e);n._store=new a(t)}else if('object'==typeof e&&'string'==typeof e.type){var a=r(e.type);n._store=new a(e)}else if('object'==typeof e&&e.putTask&&e.getTask&&(n.filo&&e.takeLastN||!n.filo&&e.takeFirstN))n._store=e;else throw new Error('unknown_store');n._connected=!1,n._tasksWaitingForConnect=[],n._connectToStore()},r.prototype._connectToStore=function(){var e=this;return e._connected?void 0:e._storeRetries>=e.storeMaxRetries?e.emit('error',new Error('failed_connect_to_store')):void(e._storeRetries++,e._store.connect(function(t,n){if(t)return setTimeout(function(){e._connectToStore()},e.storeRetryTimeout);if(void 0===n||null===n)throw new Error('store_not_returning_length');if(e.length=parseInt(n),isNaN(e.length))throw new Error('length_is_not_a_number');e.length&&(e._calledDrain=!1),e._connected=!0,e._storeRetries=0,e._store.getRunningTasks(function(t,n){!e._stopped&&e.autoResume&&(Object.keys(n).forEach(function(t){e._running++,e._startBatch(n[t],{},t)}),e.resume());for(var r=0;r<e._tasksWaitingForConnect.length;r++)e.push(e._tasksWaitingForConnect[r].input,e._tasksWaitingForConnect[r].ticket)})}))},r.prototype.resume=function(){var e=this;e._stopped=!1,e._getWorkers().forEach(function(e){'function'==typeof e.resume&&e.resume()}),setTimeout(function(){e._processNextAfterTimeout()},0)},r.prototype.pause=function(){this._stopped=!0,this._getWorkers().forEach(function(e){'function'==typeof e.pause&&e.pause()})},r.prototype.cancel=function(e,t){t=t||function(){};var n=this,r=n._workers[e];r&&r.cancel(),n._store.deleteTask(e,t)},r.prototype.push=function(e,t){var n=this,r=new i;return(t instanceof i?r=t:t&&r.on('finish',function(e){t(null,e)}).on('failed',function(e){t(e)}),!n._connected)?(n._tasksWaitingForConnect.push({input:e,ticket:r}),r):(n.filter(e,function(e,t){if(e||void 0===t||!1===t||null===t)return r.failed('input_rejected');var a=function(e){setTimeout(function(){n._queueTask(e,t,r)},0)};'function'==typeof n.id?n.id(t,function(e,t){return e?r.failed('id_error'):void a(t)}):'string'==typeof n.id&&'object'==typeof t?a(t[n.id]):a()}),r)},r.prototype._getWorkers=function(){var e=this,t=[];return Object.keys(e._workers).forEach(function(n){var r=e._workers[n];r&&-1===t.indexOf(r)&&t.push(r)}),t},r.prototype._writeNextTask=function(){var e=this;if(!e._isWriting&&e._writeQueue.length){e._isWriting=!0;var t=e._writeQueue.shift(),n=function(){e._isWriting=!1,e.setImmediate(function(){e._writeNextTask()})};if(!e._writing[t])return delete e._writing[t],n();var r=e._writing[t].task,a=e._writing[t].priority,o=e._writing[t].isNew,s=e._writing[t].id,i=e._writing[t].tickets;e._store.putTask(t,r,a,function(a){return e._writing[t]&&e._writing[t].id!==s?(e._writeQueue.unshift(t),n()):(delete e._writing[t],a?(i.failed('failed_to_put_task'),n()):void(o&&(e.length++,e._queuedPeak<e.length&&(e._queuedPeak=e.length),e._queuedTime[t]=new Date().getTime()),e._tickets[t]?e._tickets[t].push(i):e._tickets[t]=i,e.emit('task_queued',t,r),i.queued(),o&&(e._calledDrain=!1,e._calledEmpty=!1),0<e._fetching&&(e._hasMore=!0),e.batchDelayTimeout<Infinity&&(e._batchDelayTimeoutId&&clearTimeout(e._batchDelayTimeoutId),e._batchDelayTimeoutId=setTimeout(function(){e._batchDelayTimeoutId=null,e._batchTimeoutId&&clearTimeout(e._batchTimeoutId),e._batchTimeoutId=null,e._processNextIfAllowed()},e.batchDelayTimeout)),n(),e._processNextAfterTimeout()))})}},r.prototype._queueTask=function(e,t,n){var r=this,o=new i;n=n||o;var s=!1;e||(e=a.v4(),s=!0);var d=null,p=!0,u=function(){if(r._connected){var s=r._writing[e]&&r._writing[e].tickets||new l;n!==o&&s.push(n);var i=!!r._writing[e];r._writing[e]={id:a.v4(),isNew:p,task:t,priority:g,tickets:s},i||r._writeQueue.push(e),r._writeNextTask()}},c=function(){return n.accept(),r.emit('task_accepted',e,t),r.priority?void r.priority(t,function(e,t){return e?n.failed('failed_to_prioritize'):void(g=t,u())}):u()},f=function(){return d?void r.merge(d,t,function(e,r){return e?n.failed('failed_task_merge'):void(void 0===r||(t=r,c()))}):c()},g;if(s)return c();var h=r._workers[e];return r.cancelIfRunning&&h&&h.cancel(),r._writing[e]?(d=r._writing[e].task,f()):void r._store.getTask(e,function(t,a){return t?n.failed('failed_to_get'):(void 0!==a&&(p=!1),r._writing[e]?(d=r._writing[e].task,f()):void 0===a?c():void(d=a,f()))})},r.prototype._emptied=function(){this._calledEmpty||(this._calledEmpty=!0,this.emit('empty'))},r.prototype._drained=function(){this._calledDrain||(this._calledDrain=!0,this.emit('drain'))},r.prototype._getNextBatch=function(e){this._store[this.filo?'takeLastN':'takeFirstN'](this.batchSize,e)},r.prototype._processNextAfterTimeout=function(){var e=this;e.length>=e.batchSize?(e._batchTimeoutId&&(clearTimeout(e._batchTimeoutId),e._batchTimeoutId=null),e.setImmediate(function(){e._processNextIfAllowed()})):!e._batchTimeoutId&&e.batchDelay<Infinity&&(e._batchTimeoutId=setTimeout(function(){e._batchTimeoutId=null,e._processNextIfAllowed()},e.batchDelay))},r.prototype._processNextIfAllowed=function(){var e=this;if(e._connected)return e._stopped?void 0:(e._saturated=e._running+e._fetching>=e.concurrent,e._saturated?void 0:e.length?void e.precondition(function(t,n){t||!n?!e._preconditionRetryTimeoutId&&e.preconditionRetryTimeout&&(e._preconditionRetryTimeoutId=setTimeout(function(){e._preconditionRetryTimeoutId=null,e._processNextIfAllowed()},e.preconditionRetryTimeout)):e._processNext()}):void(e._hasMore||(e._emptied(),!e._running&&e._drained())))},r.prototype._processNext=function(){var e=this;e._hasMore=!1,e._fetching++,e._getNextBatch(function(t,n){e._fetching--;t||void 0===n||e._store.getLock(n,function(t,r){if(!t&&r){var a=Object.keys(r).length,o=0===a;if(e.length<a&&(e.length=a),!e._hasMore&&o)return e._emptied(),void(e._running||e._drained());if(e._hasMore&&o)return e._processNextAfterTimeout();var s={};Object.keys(r).forEach(function(t){var n=e._tickets[t];n&&(n.started(),s[t]=n,delete e._tickets[t])}),e._running++,1<e.concurrent-e._running&&e._processNextIfAllowed(),e._startBatch(r,s,n)}})})},r.prototype._startBatch=function(e,t,n){var r=this,a=Object.keys(e),o=null,s=new d({fn:r.process,batch:e,single:1===r.batchSize,failTaskOnProcessException:r.failTaskOnProcessException}),i=function(e){r._processedTotal++;var t={};if(!r._queuedTime[e])return t;var n=new Date().getTime()-r._queuedTime[e];return delete r._queuedTime[e],0<n&&(t.elapsed=n,r._processedTotalElapsed+=n,r._processedAverage=r._processedTotalElapsed/r._processedTotal),t};r.maxTimeout<Infinity&&(o=setTimeout(function(){s.failedBatch('task_timeout')},r.maxTimeout)),s.on('task_failed',function(n,o){var d=a[n];if(r._retries[d]=r._retries[d]||0,r._retries[d]++,s.cancelled||r._retries[d]>=r.maxRetries){var l=i(d);t[d]&&(t[d].failed(o),delete t[d]),r._failedTotal++,r.emit('task_failed',d,o,l)}else r.retryDelay?setTimeout(function(){r.emit('task_retry',d,r._retries[d]),r._queueTask(d,e[d],t[d])},r.retryDelay):r.setImmediate(function(){r.emit('task_retry',d,r._retries[d]),r._queueTask(d,e[d],t[d])})}),s.on('task_finish',function(e,n){var o=a[e],s=i(o);t[o]&&(t[o].finish(n),delete t[o]),r.emit('task_finish',o,n,s)}),s.on('task_progress',function(e,n){var o=a[e];t[o]&&(t[o].progress(n),delete t[o]),r.emit('task_progress',o,n)}),s.on('progress',function(e){r.emit('batch_progress',e)}),s.on('finish',function(e){r.emit('batch_finish',e)}),s.on('failed',function(e){r.emit('batch_failed',e)}),s.on('end',function(){r.length-=Object.keys(e).length,o&&clearTimeout(o);var t=function(){r._connected&&r._store.releaseLock(n,function(e){return e?setTimeout(function(){t()},1):void(r._running--,a.forEach(function(e){r._workers[e]&&!r._workers[e].active&&delete r._workers[e]}),r._processNextAfterTimeout())})};r.afterProcessDelay?setTimeout(function(){t()},r.afterProcessDelay):r.setImmediate(function(){t()})}),a.forEach(function(e){r._workers[e]=s});try{s.start(),a.forEach(function(t){r.emit('task_started',t,e[t])})}catch(t){r.emit('error',t)}},e.exports=r}).call(t,n(45).setImmediate)},function(e,t,n){var r=n(153),a=n(154),o=a;o.v1=r,o.v4=a,e.exports=o},function(e,t,n){function r(e,t,r){var u=t&&r||0,i=t||[];e=e||{};var c=e.node||l,f=void 0===e.clockseq?p:e.clockseq;if(null==c||null==f){var g=a();null==c&&(c=l=[1|g[0],g[1],g[2],g[3],g[4],g[5]]),null==f&&(f=p=16383&(g[6]<<8|g[7]))}var h=void 0===e.msecs?new Date().getTime():e.msecs,_=void 0===e.nsecs?d+1:e.nsecs,m=h-s+(_-d)/1e4;if(0>m&&void 0===e.clockseq&&(f=16383&f+1),(0>m||h>s)&&void 0===e.nsecs&&(_=0),1e4<=_)throw new Error('uuid.v1(): Can\'t create more than 10M uuids/sec');s=h,d=_,p=f,h+=122192928e5;var y=(1e4*(268435455&h)+_)%4294967296;i[u++]=255&y>>>24,i[u++]=255&y>>>16,i[u++]=255&y>>>8,i[u++]=255&y;var b=268435455&1e4*(h/4294967296);i[u++]=255&b>>>8,i[u++]=255&b,i[u++]=16|15&b>>>24,i[u++]=255&b>>>16,i[u++]=128|f>>>8,i[u++]=255&f;for(var E=0;6>E;++E)i[u+E]=c[E];return t?t:o(i)}var a=n(64),o=n(65),s=0,d=0,l,p;e.exports=r},function(e,t,n){var r=n(64),a=n(65);e.exports=function(e,t,n){var o=t&&n||0;'string'==typeof e&&(t='binary'===e?Array(16):null,e=null),e=e||{};var s=e.random||(e.rng||r)();if(s[6]=64|15&s[6],s[8]=128|63&s[8],t)for(var i=0;16>i;++i)t[o+i]=s[i];return t||a(s)}},function(t,n,r){function a(e){this.fn=e.fn,this.batch=e.batch,this.single=e.single,this.active=!1,this.cancelled=!1,this.failTaskOnProcessException=e.failTaskOnProcessException}var s=r(10),i=r(6).EventEmitter,d=r(67);s.inherits(a,i),a.prototype.setup=function(){var e=this;e._taskIds=Object.keys(e.batch),e._process={},e._waiting={},e._eta=new d,e.counts={finished:0,failed:0,completed:0,total:e._taskIds.length},e.status='ready',e.progress={tasks:{},complete:0,total:e._taskIds.length,eta:''},e._taskIds.forEach(function(t,n){e._waiting[n]=!0,e.progress.tasks[n]={pct:0,complete:0,total:1}})},a.prototype.start=function(){var e=this;if(!e.active){e.setup(),e._eta.count=e.progress.total,e._eta.start(),e.active=!0,e.status='in-progress';var t=e._taskIds.map(function(t){return e.batch[t]});e.single&&(t=t[0]);try{e._process=e.fn.call(e,t,function(t,n){e.active&&(t?e.failedBatch(t):e.finishBatch(n))})}catch(t){if(e.failTaskOnProcessException)e.failedBatch(t);else throw new Error(t)}e._process=e._process||{}}},a.prototype.end=function(){this.active&&(this.status='finished',this.active=!1,this.emit('end'))},a.prototype.resume=function(){'function'==typeof this._process.resume&&this._process.resume(),this.status='in-progress'},a.prototype.pause=function(){'function'==typeof this._process.pause&&this._process.pause(),this.status='paused'},a.prototype.cancel=function(){this.cancelled=!0,'function'==typeof this._process.cancel&&this._process.cancel(),'function'==typeof this._process.abort&&this._process.abort(),this.failedBatch('cancelled')},a.prototype.failedBatch=function(e){var t=this;t.active&&(Object.keys(t._waiting).forEach(function(n){t._waiting[n]&&t.failedTask(n,e)}),t.emit('failed',e),t.end())},a.prototype.failedTask=function(e,t){var n=this;!n.active||n._waiting[e]&&(n._waiting[e]=!1,n.counts.failed++,n.counts.completed++,n.emit('task_failed',e,t))},a.prototype.finishBatch=function(e){var t=this;t.active&&(Object.keys(t._waiting).forEach(function(n){t._waiting[n]&&t.finishTask(n,e)}),t.emit('finish',e),t.end())},a.prototype.finishTask=function(e,t){var n=this;!n.active||n._waiting[e]&&(n._waiting[e]=!1,n.counts.finished++,n.counts.completed++,n.emit('task_finish',e,t))},a.prototype.progressBatch=function(e,t,n){var r=this;r.active&&(Object.keys(r._waiting).forEach(function(a){r._waiting[a]&&r.progressTask(a,e,t,n)}),r.progress.complete=0,r._taskIds.forEach(function(e,t){r.progress.complete+=r.progress.tasks[t].pct}),r._eta.done=r.progress.complete,r.progress.eta=r._eta.format('{{etah}}'),r.progress.message=n||'',r.emit('progress',r.progress))},a.prototype.progressTask=function(t,n,r,a){var s=this;!s.active||s._waiting[t]&&(s.progress.tasks[t].complete=n,s.progress.tasks[t].total=s.progress.tasks[t].total||r,s.progress.tasks[t].message=s.progress.tasks[t].message||a,s.progress.tasks[t].pct=e(0,o(1,n/r)),s.emit('task_progress',t,s.progress.tasks[t]))},t.exports=a},function(e,t,n){function r(){this.tickets=[]}var a=n(66);r.prototype._apply=function(e,t){this.tickets.forEach(function(n){n[e].apply(n,t)})},r.prototype.push=function(e){var t=this;return e instanceof r?e.tickets.forEach(function(e){t.push(e)}):void(e instanceof a&&-1===t.tickets.indexOf(e)&&t.tickets.push(e))},Object.keys(a.prototype).forEach(function(e){r.prototype[e]=function(){this._apply(e,arguments)}}),e.exports=r},function(e){function t(e){throw new Error('Cannot find module \''+e+'\'.')}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=157},function(e){function t(e,t){var n=e.map(function(e,t){return{item:e,idx:t}});return n.sort(function(e,n){return t(e.item,n.item)||e.idx-n.idx}),n.map(function(e){return e.item})}function n(){this._queue=[],this._tasks={},this._priorities={},this._running={}}var r=0;n.prototype.connect=function(e){e(null,this._queue.length)},n.prototype.getTask=function(e,t){return t(null,this._tasks[e])},n.prototype.deleteTask=function(e,t){var n=this,r=n._tasks[e];delete n._tasks[e],delete n._priorities[e],r&&n._queue.splice(n._queue.indexOf(e),1),t()},n.prototype.putTask=function(e,n,r,a){var o=this,s=o._tasks[e];o._tasks[e]=n,s||o._queue.push(e),r!==void 0&&(o._priorities[e]=r,o._queue=t(o._queue,function(e,t){return o._priorities[e]<o._priorities[t]?1:o._priorities[e]>o._priorities[t]?-1:0})),a()},n.prototype.takeFirstN=function(e,t){var n=this,a=r++;var o=n._queue.splice(0,e),s={};o.forEach(function(e){s[e]=n._tasks[e],delete n._tasks[e]}),n._running[a]=s,t(null,a)},n.prototype.takeLastN=function(e,t){var a=this,o=r++,s=a._queue.splice(-e).reverse(),i={};s.forEach(function(e){i[e]=a._tasks[e],delete a._tasks[e]}),a._running[o]=i,t(null,o)},n.prototype.getLock=function(e,t){var n=this;t(null,n._running[e])},n.prototype.getRunningTasks=function(e){var t=this;e(null,t._running)},n.prototype.releaseLock=function(e,t){var n=this;delete n._running[e],t()},e.exports=n},function(e,t,n){'use strict';function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o({command:e,timeout:t,confirmations:n=[]}){return(r,...a)=>{const o=(0,i.default)(t,0)||n.length?c.delayReject(t||g.COMMAND_TIMEOUT,g.ERROR_COMMAND_TIMED_OUT):Promise.resolve(),s=new Promise((e,t)=>{this.once(g.NOTICE_MESSAGE_IDS.UNRECOGNIZED_COMMAND,()=>{t(g.ERROR_COMMAND_UNRECOGNIZED)})}),d=Promise.race(n.map(({event:t,cb:n})=>new Promise((r,o)=>{this.once(t,(t)=>{if('function'!=typeof n)return r(t);const s=n(t,e,...a);return!0===s?r(t):o(s)})}))),l=`/${e} ${a.join(' ')}`;return this.say(r,l),Promise.race([o,s,d])}}Object.defineProperty(t,'__esModule',{value:!0}),t.commandsFactory=t.commandCreator=void 0;var s=n(49),i=a(s),d=n(160),l=a(d),p=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++)for(var r in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},u=n(29),c=r(u),f=n(5),g=r(f);const h=Object.entries(g.CHAT_COMMANDS).reduce((e,[t,n])=>{switch(n){case g.CHAT_COMMANDS.BAN:return p({},e,{[(0,l.default)(t)]:{command:n,confirmations:[{event:`${g.COMMANDS.NOTICE}/${g.NOTICE_MESSAGE_IDS.BAN_SUCCESS}`},{event:`${g.COMMANDS.NOTICE}/${g.NOTICE_MESSAGE_IDS.ALREADY_BANNED}`}]}});case g.CHAT_COMMANDS.EMOTE_ONLY:return p({},e,{[(0,l.default)(t)]:{command:n,confirmations:[{event:`${g.COMMANDS.NOTICE}/${g.NOTICE_MESSAGE_IDS.EMOTE_ONLY_ON}`},{event:`${g.COMMANDS.NOTICE}/${g.NOTICE_MESSAGE_IDS.ALREADY_EMOTE_ONLY_ON}`}]}});case g.CHAT_COMMANDS.EMOTE_ONLY_OFF:return p({},e,{[(0,l.default)(t)]:{command:n,confirmations:[{event:`${g.COMMANDS.NOTICE}/${g.NOTICE_MESSAGE_IDS.EMOTE_ONLY_OFF}`},{event:`${g.COMMANDS.NOTICE}/${g.NOTICE_MESSAGE_IDS.ALREADY_EMOTE_ONLY_OFF}`}]}});case g.CHAT_COMMANDS.MODS:return p({},e,{[(0,l.default)(t)]:{command:n,confirmations:[{event:`${g.COMMANDS.NOTICE}/${g.EVENTS.ROOM_MODS}`}]}});case g.CHAT_COMMANDS.ME:case g.CHAT_COMMANDS.CLEAR:case g.CHAT_COMMANDS.COLOR:case g.CHAT_COMMANDS.COMMERCIAL:case g.CHAT_COMMANDS.FOLLOWERS_ONLY:case g.CHAT_COMMANDS.FOLLOWERS_ONLY_OFF:case g.CHAT_COMMANDS.HOST:case g.CHAT_COMMANDS.MOD:case g.CHAT_COMMANDS.PART:case g.CHAT_COMMANDS.R9K:case g.CHAT_COMMANDS.R9K_OFF:case g.CHAT_COMMANDS.SLOW:case g.CHAT_COMMANDS.SLOW_OFF:case g.CHAT_COMMANDS.SUBSCRIBERS:case g.CHAT_COMMANDS.SUBSCRIBERS_OFF:case g.CHAT_COMMANDS.TIMEOUT:case g.CHAT_COMMANDS.UNBAN:case g.CHAT_COMMANDS.UNHOST:case g.CHAT_COMMANDS.UNMOD:case g.CHAT_COMMANDS.WHISPER:default:return p({},e,{[(0,l.default)(t)]:{command:n,confirmations:[]}});}},{});t.commandCreator=o,t.commandsFactory=function(){return Object.entries(h).reduce((e,[t,n])=>p({},e,{[t]:o.call(this,p({},n))}),{})}},function(e,t,n){var r=n(161),a=n(169),o=a(function(e,t,n){return t=t.toLowerCase(),e+(n?r(t):t)});e.exports=o},function(e,t,n){var r=n(4),a=n(162);e.exports=function(e){return a(r(e).toLowerCase())}},function(e,t,n){var r=n(163),a=r('toUpperCase');e.exports=a},function(e,t,n){var r=n(164),a=n(68),o=n(166),s=n(4);e.exports=function(e){return function(t){t=s(t);var n=a(t)?o(t):void 0,i=n?n[0]:t.charAt(0),d=n?r(n,1).join(''):t.slice(1);return i[e]()+d}}},function(e,t,n){var r=n(165);e.exports=function(e,t,n){var a=e.length;return n=void 0===n?a:n,!t&&n>=a?e:r(e,t,n)}},function(e){e.exports=function(e,t,n){var r=-1,a=e.length;0>t&&(t=-t>a?0:a+t),n=n>a?a:n,0>n&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(a);++r<a;)o[r]=e[r+t];return o}},function(e,t,n){var r=n(167),a=n(68),o=n(168);e.exports=function(e){return a(e)?o(e):r(e)}},function(e){e.exports=function(e){return e.split('')}},function(e){var t='\\ud800-\\udfff',n='(?:'+('['+('\\u0300-\\u036f'+'\\ufe20-\\ufe2f'+'\\u20d0-\\u20ff')+']')+'|'+'\\ud83c[\\udffb-\\udfff]'+')'+'?',r='['+'\\ufe0e\\ufe0f'+']?',a=/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]?|[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g;e.exports=function(e){return e.match(a)||[]}},function(e,t,n){var r=n(170),a=n(171),o=n(172),s=/[']/g;e.exports=function(e){return function(t){return r(o(a(t).replace(s,'')),e,'')}}},function(e){e.exports=function(e,t,n,r){var a=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++a]);++a<o;)n=t(n,e[a],a,e);return n}},function(e){e.exports=function(e){return e}},function(e,t,n){var r=n(173),a=n(174),o=n(4),s=n(175);e.exports=function(e,t,n){return e=o(e),t=n?void 0:t,void 0===t?a(e)?s(e):r(e):e.match(t)||[]}},function(e){var t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(t)||[]}},function(e){var t=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return t.test(e)}},function(e){var t='\\ud800-\\udfff',n='\\u2700-\\u27bf',r='a-z\\xdf-\\xf6\\xf8-\\xff',a='A-Z\\xc0-\\xd6\\xd8-\\xde',o='\\xac\\xb1\\xd7\\xf7'+'\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf'+'\\u2000-\\u206f'+' \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000',s='[\'\u2019]',i='\\d+',d='['+r+']',l='[^'+t+o+i+n+r+a+']',p='['+a+']',u='(?:'+s+'(?:d|ll|m|re|s|t|ve))?',c='(?:'+s+'(?:D|LL|M|RE|S|T|VE))?',f='(?:'+('['+('\\u0300-\\u036f'+'\\ufe20-\\ufe2f'+'\\u20d0-\\u20ff')+']')+'|'+'\\ud83c[\\udffb-\\udfff]'+')'+'?',g='['+'\\ufe0e\\ufe0f'+']?',h=RegExp([p+'?'+d+'+'+u+'(?='+'[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$'+')','(?:'+p+'|'+l+')'+'+'+c+'(?='+'[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$'+')',p+'?'+('(?:'+d+'|'+l+')')+'+'+u,p+'+'+c,'\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)','\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)',i,'(?:'+'[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]'+')'+(g+f+('(?:'+'\\u200d'+'(?:'+'[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]'+')'+g+f+')*'))].join('|'),'g');e.exports=function(e){return e.match(h)||[]}},function(e,t,n){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}function a(e='',t={}){const n=(0,s.default)(e,/^\//g,'');return(0,h.default)(`${this.options.urlRoot}/${n}`,u({},t,{headers:u({},t.headers,this.headers)})).then((e)=>(0,f.default)(e,{deep:!0}))}Object.defineProperty(t,'__esModule',{value:!0});var o=n(23),s=r(o),i=n(177),d=r(i),l=n(26),p=r(l),u=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++)for(var r in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},c=n(47),f=r(c),g=n(179),h=r(g),_=n(186),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(_);t.default=class{constructor(e={}){this.readyState=1,this.status={};const t=m.apiOptions(e);this.options=t,this.headers={Accept:'application/vnd.twitchtv.v5+json',"Client-ID":t.clientId?t.clientId:void 0,Authorization:t.token?`OAuth ${t.token}`:void 0}}initialize(){return 2===this.readyState?Promise.resolve():this.get().then((e)=>(this.readyState=2,this.status=e,e))}hasScope(e){return new Promise((t,n)=>2===this.readyState?(0,d.default)((0,p.default)(this.status,'token.authorization.scopes',[]),e)?t(!0):n(!1):n(!1))}get(e,t={}){return a.call(this,e,t)}post(e,t={}){return a.call(this,e,u({},t,{method:'post'}))}put(e,t={}){return a.call(this,e,u({},t,{method:'put'}))}}},function(e,t,n){var r=n(178);e.exports=function(e,t){var n=null==e?0:e.length;return!!n&&-1<r(e,t,0)}},function(e){e.exports=function(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}},function(e,t,n){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0}),t.parseResponse=void 0;var a=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++)for(var r in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},o=n(180),s=r(o),i=n(182),d=r(i),l=n(183);const p=(e)=>e.json().then((t)=>{if(!e.ok){const n=new Error(`${e.url} ${e.statusText}`);throw n.response=t,n}return t}).catch((t)=>{throw t.ok=!1,t.status=e.status,t.statusText=e.statusText,t.url=e.url,t});t.parseResponse=p,t.default=(e,t={},n={})=>{const r=t.body&&!(t.body instanceof d.default)&&'object'==typeof t.body,o=r?JSON.stringify(t.body):t.body,i=r?a({},t.headers,{"Content-Type":'application/json'}):t.headers,u='object'==typeof t.search?`?${(0,l.stringify)(t.search,n)}`:'';return(0,s.default)(`${e}${u}`,a({},t,{method:t.method||'get',search:void 0,headers:i,body:o})).then(p)}},function(e,t,n){'use strict';n(181),e.exports=window.fetch},function(){(function(e){'use strict';function t(e){if('string'!=typeof e&&(e+=''),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError('Invalid character in header field name');return e.toLowerCase()}function n(e){return'string'!=typeof e&&(e+=''),e}function a(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return y.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function s(e){return e.bodyUsed?Promise.reject(new TypeError('Already read')):void(e.bodyUsed=!0)}function i(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function d(e){var t=new FileReader,n=i(t);return t.readAsArrayBuffer(e),n}function l(e){var t=new FileReader,n=i(t);return t.readAsText(e),n}function p(e){for(var t=new Uint8Array(e),n=Array(t.length),a=0;a<t.length;a++)n[a]=r(t[a]);return n.join('')}function u(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function c(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,!e)this._bodyText='';else if('string'==typeof e)this._bodyText=e;else if(y.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(y.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(y.arrayBuffer&&y.blob&&E(e))this._bodyArrayBuffer=u(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else if(y.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||S(e)))this._bodyArrayBuffer=u(e);else throw new Error('unsupported BodyInit type');this.headers.get('content-type')||('string'==typeof e?this.headers.set('content-type','text/plain;charset=UTF-8'):this._bodyBlob&&this._bodyBlob.type?this.headers.set('content-type',this._bodyBlob.type):y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set('content-type','application/x-www-form-urlencoded;charset=UTF-8'))},y.blob&&(this.blob=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error('could not read FormData body as blob');else return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?s(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(d)}),this.text=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(p(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error('could not read FormData body as text');else return Promise.resolve(this._bodyText)},y.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(e){var t=e.toUpperCase();return-1<T.indexOf(t)?t:e}function g(e,t){t=t||{};var n=t.body;if(e instanceof g){if(e.bodyUsed)throw new TypeError('Already read');this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=e+'';if(this.credentials=t.credentials||this.credentials||'omit',(t.headers||!this.headers)&&(this.headers=new o(t.headers)),this.method=f(t.method||this.method||'GET'),this.mode=t.mode||this.mode||null,this.referrer=null,('GET'===this.method||'HEAD'===this.method)&&n)throw new TypeError('Body not allowed for GET or HEAD requests');this._initBody(n)}function h(e){var t=new FormData;return e.trim().split('&').forEach(function(e){if(e){var n=e.split('='),r=n.shift().replace(/\+/g,' '),a=n.join('=').replace(/\+/g,' ');t.append(decodeURIComponent(r),decodeURIComponent(a))}}),t}function _(e){var t=new o;return e.split(/\r?\n/).forEach(function(e){var n=e.split(':'),r=n.shift().trim();if(r){var a=n.join(':').trim();t.append(r,a)}}),t}function m(e,t){t||(t={}),this.type='default',this.status='status'in t?t.status:200,this.ok=200<=this.status&&300>this.status,this.statusText='statusText'in t?t.statusText:'OK',this.headers=new o(t.headers),this.url=t.url||'',this._initBody(e)}if(!e.fetch){var y={searchParams:'URLSearchParams'in e,iterable:'Symbol'in e&&'iterator'in Symbol,blob:'FileReader'in e&&'Blob'in e&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:'FormData'in e,arrayBuffer:'ArrayBuffer'in e};if(y.arrayBuffer)var b=['[object Int8Array]','[object Uint8Array]','[object Uint8ClampedArray]','[object Int16Array]','[object Uint16Array]','[object Int32Array]','[object Uint32Array]','[object Float32Array]','[object Float64Array]'],E=function(e){return e&&DataView.prototype.isPrototypeOf(e)},S=ArrayBuffer.isView||function(e){return e&&-1<b.indexOf(Object.prototype.toString.call(e))};o.prototype.append=function(e,r){e=t(e),r=n(r);var a=this.map[e];this.map[e]=a?a+','+r:r},o.prototype['delete']=function(e){delete this.map[t(e)]},o.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,r){this.map[t(e)]=n(r)},o.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),a(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),a(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),a(e)},y.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var T=['DELETE','GET','HEAD','OPTIONS','POST','PUT'];g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},c.call(g.prototype),c.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:''});return e.type='error',e};var O=[301,302,303,307,308];m.redirect=function(e,t){if(-1===O.indexOf(t))throw new RangeError('Invalid status code');return new m(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=g,e.Response=m,e.fetch=function(e,t){return new Promise(function(n,r){var a=new g(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:_(o.getAllResponseHeaders()||'')};e.url='responseURL'in o?o.responseURL:e.headers.get('X-Request-URL');var t='response'in o?o.response:o.responseText;n(new m(t,e))},o.onerror=function(){r(new TypeError('Network request failed'))},o.ontimeout=function(){r(new TypeError('Network request failed'))},o.open(a.method,a.url,!0),'include'===a.credentials&&(o.withCredentials=!0),'responseType'in o&&y.blob&&(o.responseType='blob'),a.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send('undefined'==typeof a._bodyInit?null:a._bodyInit)})},e.fetch.polyfill=!0}})('undefined'==typeof self?this:self)},function(e){'use strict';e.exports=window.FormData},function(e,t,n){'use strict';var r=n(184),a=n(185),o=n(70);e.exports={formats:o,parse:a,stringify:r}},function(e,t,n){'use strict';var r=n(69),a=n(70),o={brackets:function(e){return e+'[]'},indices:function(e,t){return e+'['+t+']'},repeat:function(e){return e}},s=Date.prototype.toISOString,d={delimiter:'&',encode:!0,encoder:r.encode,encodeValuesOnly:!1,serializeDate:function(e){return s.call(e)},skipNulls:!1,strictNullHandling:!1},l=function e(t,n,a,o,s,l,p,u,c,f,g,h){var _=t;if('function'==typeof p)_=p(n,_);else if(_ instanceof Date)_=f(_);else if(null===_){if(o)return l&&!h?l(n,d.encoder):n;_=''}if('string'==typeof _||'number'==typeof _||'boolean'==typeof _||r.isBuffer(_)){if(l){var m=h?n:l(n,d.encoder);return[g(m)+'='+g(l(_,d.encoder))]}return[g(n)+'='+g(_+'')]}var y=[];if('undefined'==typeof _)return y;var b;if(Array.isArray(p))b=p;else{var E=Object.keys(_);b=u?E.sort(u):E}for(var S=0,i;S<b.length;++S)(i=b[S],!(s&&null===_[i]))&&(y=Array.isArray(_)?y.concat(e(_[i],a(n,i),a,o,s,l,p,u,c,f,g,h)):y.concat(e(_[i],n+(c?'.'+i:'['+i+']'),a,o,s,l,p,u,c,f,g,h)));return y};e.exports=function(e,t){var n=e,s=t?r.assign({},t):{};if(null!==s.encoder&&s.encoder!==void 0&&'function'!=typeof s.encoder)throw new TypeError('Encoder has to be a function.');var p='undefined'==typeof s.delimiter?d.delimiter:s.delimiter,u='boolean'==typeof s.strictNullHandling?s.strictNullHandling:d.strictNullHandling,c='boolean'==typeof s.skipNulls?s.skipNulls:d.skipNulls,f='boolean'==typeof s.encode?s.encode:d.encode,g='function'==typeof s.encoder?s.encoder:d.encoder,h='function'==typeof s.sort?s.sort:null,_='undefined'!=typeof s.allowDots&&s.allowDots,m='function'==typeof s.serializeDate?s.serializeDate:d.serializeDate,y='boolean'==typeof s.encodeValuesOnly?s.encodeValuesOnly:d.encodeValuesOnly;if('undefined'==typeof s.format)s.format=a['default'];else if(!Object.prototype.hasOwnProperty.call(a.formatters,s.format))throw new TypeError('Unknown format option provided.');var b=a.formatters[s.format],E,S;'function'==typeof s.filter?(S=s.filter,n=S('',n)):Array.isArray(s.filter)&&(S=s.filter,E=S);var T=[];if('object'!=typeof n||null===n)return'';var O=s.arrayFormat in o?s.arrayFormat:'indices'in s?s.indices?'indices':'repeat':'indices';var x=o[O];E||(E=Object.keys(n)),h&&E.sort(h);for(var R=0,i;R<E.length;++R)(i=E[R],!(c&&null===n[i]))&&(T=T.concat(l(n[i],i,x,u,c,f?g:null,S,h,_,m,b,y)));var k=T.join(p),w=!0===s.addQueryPrefix?'?':'';return 0<k.length?w+k:''}},function(e,t,n){'use strict';var r=n(69),a=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:r.decode,delimiter:'&',depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},s=function(e,t){for(var n={},r=t.ignoreQueryPrefix?e.replace(/^\?/,''):e,s=t.parameterLimit===Infinity?void 0:t.parameterLimit,d=r.split(t.delimiter,s),l=0;l<d.length;++l){var i=d[l],p=i.indexOf(']='),u=-1===p?i.indexOf('='):p+1,c,f;-1===u?(c=t.decoder(i,o.decoder),f=t.strictNullHandling?null:''):(c=t.decoder(i.slice(0,u),o.decoder),f=t.decoder(i.slice(u+1),o.decoder)),n[c]=a.call(n,c)?[].concat(n[c]).concat(f):f}return n},d=function(e,t,n){for(var r=t,a=e.length-1;0<=a;--a){var o=e[a],s;if('[]'===o)s=[],s=s.concat(r);else{s=n.plainObjects?Object.create(null):{};var i='['===o.charAt(0)&&']'===o.charAt(o.length-1)?o.slice(1,-1):o,d=parseInt(i,10);!isNaN(d)&&o!==i&&d+''===i&&0<=d&&n.parseArrays&&d<=n.arrayLimit?(s=[],s[d]=r):s[i]=r}r=s}return r},l=function(e,t,n){if(e){var r=n.allowDots?e.replace(/\.([^.[]+)/g,'[$1]'):e,o=/(\[[^[\]]*])/,s=/(\[[^[\]]*])/g,l=o.exec(r),p=l?r.slice(0,l.index):r,u=[];if(p){if(!n.plainObjects&&a.call(Object.prototype,p)&&!n.allowPrototypes)return;u.push(p)}for(var c=0;null!==(l=s.exec(r))&&c<n.depth;){if(c+=1,!n.plainObjects&&a.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(l[1])}return l&&u.push('['+r.slice(l.index)+']'),d(u,t,n)}};e.exports=function(e,t){var n=t?r.assign({},t):{};if(null!==n.decoder&&void 0!==n.decoder&&'function'!=typeof n.decoder)throw new TypeError('Decoder has to be a function.');if(n.ignoreQueryPrefix=!0===n.ignoreQueryPrefix,n.delimiter='string'==typeof n.delimiter||r.isRegExp(n.delimiter)?n.delimiter:o.delimiter,n.depth='number'==typeof n.depth?n.depth:o.depth,n.arrayLimit='number'==typeof n.arrayLimit?n.arrayLimit:o.arrayLimit,n.parseArrays=!1!==n.parseArrays,n.decoder='function'==typeof n.decoder?n.decoder:o.decoder,n.allowDots='boolean'==typeof n.allowDots?n.allowDots:o.allowDots,n.plainObjects='boolean'==typeof n.plainObjects?n.plainObjects:o.plainObjects,n.allowPrototypes='boolean'==typeof n.allowPrototypes?n.allowPrototypes:o.allowPrototypes,n.parameterLimit='number'==typeof n.parameterLimit?n.parameterLimit:o.parameterLimit,n.strictNullHandling='boolean'==typeof n.strictNullHandling?n.strictNullHandling:o.strictNullHandling,''===e||null===e||'undefined'==typeof e)return n.plainObjects?Object.create(null):{};for(var a='string'==typeof e?s(e,n):e,d=n.plainObjects?Object.create(null):{},p=Object.keys(a),u=0;u<p.length;++u){var i=p[u],c=l(i,a[i],n);d=r.merge(d,c,n)}return r.compact(d)}},function(e,t,n){'use strict';function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,'__esModule',{value:!0}),t.apiOptions=void 0;var a=n(53),o=r(a),s=n(52),i=r(s),d=n(54),l=r(d),p=n(61),u=r(p),c=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++)for(var r in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},f=n(62),g=r(f),h=n(187),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(h);t.apiOptions=(e)=>{const t={debug:i.default},n=c({},t,{clientId:o.default}),r=c({},t,{token:o.default}),a=(0,l.default)({},c({},e),{urlRoot:_.KRAKEN_URL_ROOT,debug:!1});return(0,g.default)((0,u.default)(a,n)||(0,u.default)(a,r),'[twitch-js/Api] options: Expected valid options'),a}},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});t.KRAKEN_URL_ROOT='https://api.twitch.tv/kraken'}])['default']});